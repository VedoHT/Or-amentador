{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterLink } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/login.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../services/auth.service\";\nimport * as i4 from \"src/app/services/toast.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nfunction LoginComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\", 18);\n    i0.ɵɵtext(2, \"C\\u00F3digo de verifica\\u00E7\\u00E3o\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 19);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"input\", 20);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_div_12_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.codigoGerado, $event) || (ctx_r1.codigoGerado = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_div_12_Template_input_ngModelChange_5_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.verificarCodigo());\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"C\\u00F3digo enviado por e\\u2011mail. Expira em \", ctx_r1.formatTime(ctx_r1.tempoRestante), \".\");\n    i0.ɵɵadvance();\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.codigoGerado);\n  }\n}\nfunction LoginComponent_label_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"label\", 21)(1, \"input\", 22);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_label_13_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.keepMeConnected, $event) || (ctx_r1.keepMeConnected = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(2, \" Mantenha-me conectado \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.keepMeConnected);\n  }\n}\nfunction LoginComponent_button_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function LoginComponent_button_17_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.resetForm());\n    });\n    i0.ɵɵtext(1, \" Cancelar \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_button_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function LoginComponent_button_18_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.reSend());\n    });\n    i0.ɵɵtext(1, \" Reenviar c\\u00F3digo \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"div\", 15)(2, \"span\", 25);\n    i0.ɵɵtext(3, \"\\u26A0\\uFE0F\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\")(5, \"b\");\n    i0.ɵɵtext(6, \"Ops! Algo deu errado\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 19);\n    i0.ɵɵtext(8, \"Verifique seus dados e tente novamente\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"div\", 26)(10, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function LoginComponent_div_19_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.resetForm());\n    });\n    i0.ɵɵtext(11, \"Tentar novamente\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction LoginComponent_a_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 28);\n    i0.ɵɵtext(1, \"Registre-se\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class LoginComponent {\n  constructor(api, router, route, auth, cdr, toast) {\n    this.api = api;\n    this.router = router;\n    this.route = route;\n    this.auth = auth;\n    this.cdr = cdr;\n    this.toast = toast;\n    this.keepMeConnected = false;\n    this.email = '';\n    this.codigoGerado = '';\n    this.enviouCodigo = false;\n    this.enviarDesabilitado = false;\n    this.erroLogin = false;\n    this.usaEmail = true;\n    this.tempoRestante = 0;\n  }\n  ngOnDestroy() {\n    if (this.timer) clearInterval(this.timer);\n  }\n  onSubmit() {\n    if (!this.enviouCodigo) {\n      this.GerarCodigo();\n    } else {\n      this.LoginUsuario();\n    }\n  }\n  reSend() {\n    if (this.tempoRestante === 0) {\n      this.enviarDesabilitado = false;\n      this.enviouCodigo = false; // permite GerarCodigo() rodar de novo\n      this.cdr.markForCheck();\n      this.GerarCodigo();\n    }\n  }\n  GerarCodigo() {\n    const body = {\n      email: this.email.trim().toLowerCase()\n    };\n    if (!body.email || !/^\\S+@\\S+\\.\\S+$/.test(body.email)) {\n      this.erroLogin = true;\n      this.cdr.markForCheck();\n      return;\n    }\n    if (!this.enviarDesabilitado && !this.enviouCodigo) {\n      this.enviarDesabilitado = true;\n      this.cdr.markForCheck(); // opcional: já reflete o disabled\n      this.api.PreLogin(body).subscribe({\n        next: resp => {\n          this.enviouCodigo = true;\n          this.erroLogin = false;\n          this.dadosUsuario = resp.dadosUsuario;\n          const validade = new Date(resp.validade).getTime();\n          const now = Date.now();\n          this.tempoRestante = Math.max(0, Math.floor((validade - now) / 1000));\n          this.startTimer();\n          this.enviarDesabilitado = false; // libera “Confirmar código”\n          this.cdr.markForCheck(); // 👈 força render imediato dos campos de código\n        },\n        error: () => {\n          this.erroLogin = true;\n          this.enviouCodigo = false;\n          this.enviarDesabilitado = false;\n          if (this.timer) clearInterval(this.timer);\n          this.cdr.markForCheck(); // 👈 reflete erro/estado\n        }\n      });\n    }\n  }\n  startTimer() {\n    if (this.timer) clearInterval(this.timer);\n    this.timer = setInterval(() => {\n      if (this.tempoRestante > 0) {\n        this.tempoRestante--;\n        this.cdr.markForCheck(); // OnPush: atualiza o contador no DOM\n      } else {\n        clearInterval(this.timer);\n        this.timer = null;\n        // 👇 expiração: volta ao estado natural e avisa\n        this.toast.warn('Código expirou! Tente novamente realizar o login.');\n        this.resetForm(); // volta para campo de e-mail + \"Enviar código\"\n        this.cdr.markForCheck();\n      }\n    }, 1000);\n  }\n  resetForm() {\n    this.erroLogin = false;\n    this.enviouCodigo = false;\n    this.enviarDesabilitado = false;\n    this.codigoGerado = '';\n    this.tempoRestante = 0;\n    if (this.timer) clearInterval(this.timer);\n    this.cdr.markForCheck(); // 👈 reflete o reset imediatamente\n  }\n  verificarCodigo() {\n    this.enviarDesabilitado = !(this.codigoGerado?.toString().length === 6);\n  }\n  LoginUsuario() {\n    if (!this.enviarDesabilitado && this.enviouCodigo && this.dadosUsuario) {\n      const du = this.dadosUsuario;\n      const email = (du.emailUsuario ?? '').trim().toLowerCase();\n      const identifier = email;\n      this.api.Login(du, this.codigoGerado, this.keepMeConnected).subscribe({\n        next: ok => {\n          if (ok) {\n            if (this.timer) clearInterval(this.timer);\n            this.erroLogin = false;\n            const email = (du.emailUsuario ?? '').trim().toLowerCase();\n            this.auth.login(identifier, 'otp', du.codigoUsuario);\n            this.toast.show('success', 'Login realizado com sucesso!'); // 👈 aqui\n            const redirect = this.route.snapshot.queryParamMap.get('redirect');\n            this.router.navigateByUrl(redirect || '/meus');\n          } else {\n            this.erroLogin = true;\n          }\n        },\n        error: () => {\n          this.erroLogin = true;\n        }\n      });\n    }\n  }\n  formatTime(s) {\n    const m = Math.floor(s / 60),\n      r = s % 60;\n    return `${m.toString().padStart(2, '0')}:${r.toString().padStart(2, '0')}`;\n  }\n  static {\n    this.ɵfac = function LoginComponent_Factory(t) {\n      return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.LoginService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i4.ToastService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoginComponent,\n      selectors: [[\"app-login\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 25,\n      vars: 10,\n      consts: [[1, \"grid\", \"form-shell\"], [1, \"card\", \"grid\", 2, \"gap\", \"16px\"], [2, \"display\", \"flex\", \"align-items\", \"center\", \"justify-content\", \"space-between\"], [2, \"margin\", \"0\"], [1, \"step-indicator\"], [1, \"form-shell\", 3, \"ngSubmit\"], [\"for\", \"email\"], [\"type\", \"email\", \"id\", \"email\", \"placeholder\", \"seu-email@exemplo.com\", \"name\", \"email\", \"autocomplete\", \"email\", \"required\", \"\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\", \"disabled\"], [4, \"ngIf\"], [\"class\", \"keep\", 4, \"ngIf\"], [1, \"form-actions\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"type\", \"button\", \"class\", \"btn btn-ghost\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"card\", \"style\", \"border-color:crimson;\", 4, \"ngIf\"], [2, \"display\", \"flex\", \"gap\", \"8px\", \"align-items\", \"center\", \"justify-content\", \"space-between\", \"flex-wrap\", \"wrap\"], [2, \"display\", \"flex\", \"gap\", \"8px\", \"align-items\", \"center\"], [\"routerLink\", \"/novo\", 1, \"btn\", \"btn-ghost\"], [\"routerLink\", \"/registrar\", \"class\", \"btn btn-ghost\", 4, \"ngIf\"], [\"for\", \"codigoGerado\"], [1, \"small\"], [\"type\", \"text\", \"id\", \"codigoGerado\", \"name\", \"codigoGerado\", \"maxlength\", \"6\", \"placeholder\", \"000000\", \"autocomplete\", \"one-time-code\", \"inputmode\", \"numeric\", \"pattern\", \"[0-9]{6}\", \"required\", \"\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\"], [1, \"keep\"], [\"type\", \"checkbox\", \"name\", \"keepMeConnectedValidation\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"button\", 1, \"btn\", \"btn-ghost\", 3, \"click\"], [1, \"card\", 2, \"border-color\", \"crimson\"], [2, \"font-size\", \"18px\"], [2, \"margin-top\", \"8px\"], [1, \"btn\", \"btn-ghost\", 3, \"click\"], [\"routerLink\", \"/registrar\", 1, \"btn\", \"btn-ghost\"]],\n      template: function LoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h2\", 3);\n          i0.ɵɵtext(4, \"Entrar\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"div\", 4);\n          i0.ɵɵtext(6, \"Acesse para salvar seus or\\u00E7amentos\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(7, \"form\", 5);\n          i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_7_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(8, \"div\")(9, \"label\", 6);\n          i0.ɵɵtext(10, \"E-mail\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"input\", 7);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_11_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.email, $event) || (ctx.email = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(12, LoginComponent_div_12_Template, 6, 2, \"div\", 8)(13, LoginComponent_label_13_Template, 3, 1, \"label\", 9);\n          i0.ɵɵelementStart(14, \"div\", 10)(15, \"button\", 11);\n          i0.ɵɵtext(16);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(17, LoginComponent_button_17_Template, 2, 0, \"button\", 12)(18, LoginComponent_button_18_Template, 2, 0, \"button\", 12);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(19, LoginComponent_div_19_Template, 12, 0, \"div\", 13);\n          i0.ɵɵelementStart(20, \"div\", 14)(21, \"div\", 15)(22, \"a\", 16);\n          i0.ɵɵtext(23, \"Continuar sem login\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(24, LoginComponent_a_24_Template, 2, 0, \"a\", 17);\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(11);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.email);\n          i0.ɵɵproperty(\"disabled\", ctx.enviouCodigo);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.enviouCodigo);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.enviouCodigo);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"disabled\", ctx.enviouCodigo ? ctx.enviarDesabilitado || ctx.codigoGerado.length !== 6 : !ctx.email || ctx.email.length < 5);\n          i0.ɵɵadvance();\n          i0.ɵɵtextInterpolate1(\" \", ctx.enviouCodigo ? \"Confirmar c\\u00F3digo\" : \"Enviar c\\u00F3digo\", \" \");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.enviouCodigo);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.enviouCodigo && ctx.tempoRestante === 0);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.erroLogin);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", !ctx.enviouCodigo);\n        }\n      },\n      dependencies: [CommonModule, i5.NgIf, FormsModule, i6.ɵNgNoValidate, i6.DefaultValueAccessor, i6.CheckboxControlValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.RequiredValidator, i6.MaxLengthValidator, i6.PatternValidator, i6.NgModel, i6.NgForm, RouterLink],\n      styles: [\"form.form-shell[_ngcontent-%COMP%] {\\n    display: flex;\\n    flex-direction: column;\\n    gap: 16px;\\n}\\n\\n.keep[_ngcontent-%COMP%] {\\n    display: flex;\\n    gap: 8px;\\n    align-items: center;\\n    font-size: 14px;\\n}\\n\\n.form-actions[_ngcontent-%COMP%] {\\n    display: flex;\\n    gap: 12px;\\n    flex-wrap: wrap;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvbG9naW4vbG9naW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIsU0FBUztBQUNiOztBQUVBO0lBQ0ksYUFBYTtJQUNiLFFBQVE7SUFDUixtQkFBbUI7SUFDbkIsZUFBZTtBQUNuQjs7QUFFQTtJQUNJLGFBQWE7SUFDYixTQUFTO0lBQ1QsZUFBZTtBQUNuQiIsInNvdXJjZXNDb250ZW50IjpbImZvcm0uZm9ybS1zaGVsbCB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgIGdhcDogMTZweDtcclxufVxyXG5cclxuLmtlZXAge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGdhcDogOHB4O1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIGZvbnQtc2l6ZTogMTRweDtcclxufVxyXG5cclxuLmZvcm0tYWN0aW9ucyB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZ2FwOiAxMnB4O1xyXG4gICAgZmxleC13cmFwOiB3cmFwO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"],\n      changeDetection: 0\n    });\n  }\n}","map":{"version":3,"names":["CommonModule","FormsModule","RouterLink","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵtwoWayListener","LoginComponent_div_12_Template_input_ngModelChange_5_listener","$event","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵtwoWayBindingSet","codigoGerado","ɵɵresetView","ɵɵlistener","verificarCodigo","ɵɵadvance","ɵɵtextInterpolate1","formatTime","tempoRestante","ɵɵtwoWayProperty","LoginComponent_label_13_Template_input_ngModelChange_1_listener","_r3","keepMeConnected","LoginComponent_button_17_Template_button_click_0_listener","_r4","resetForm","LoginComponent_button_18_Template_button_click_0_listener","_r5","reSend","LoginComponent_div_19_Template_button_click_10_listener","_r6","LoginComponent","constructor","api","router","route","auth","cdr","toast","email","enviouCodigo","enviarDesabilitado","erroLogin","usaEmail","ngOnDestroy","timer","clearInterval","onSubmit","GerarCodigo","LoginUsuario","markForCheck","body","trim","toLowerCase","test","PreLogin","subscribe","next","resp","dadosUsuario","validade","Date","getTime","now","Math","max","floor","startTimer","error","setInterval","warn","toString","length","du","emailUsuario","identifier","Login","ok","login","codigoUsuario","show","redirect","snapshot","queryParamMap","get","navigateByUrl","s","m","r","padStart","ɵɵdirectiveInject","i1","LoginService","i2","Router","ActivatedRoute","i3","AuthService","ChangeDetectorRef","i4","ToastService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","LoginComponent_Template","rf","ctx","LoginComponent_Template_form_ngSubmit_7_listener","LoginComponent_Template_input_ngModelChange_11_listener","ɵɵtemplate","LoginComponent_div_12_Template","LoginComponent_label_13_Template","LoginComponent_button_17_Template","LoginComponent_button_18_Template","LoginComponent_div_19_Template","LoginComponent_a_24_Template","ɵɵproperty","i5","NgIf","i6","ɵNgNoValidate","DefaultValueAccessor","CheckboxControlValueAccessor","NgControlStatus","NgControlStatusGroup","RequiredValidator","MaxLengthValidator","PatternValidator","NgModel","NgForm","styles","changeDetection"],"sources":["G:\\Estudos\\Angular\\Orcamentador\\src\\app\\pages\\login\\login.component.ts","G:\\Estudos\\Angular\\Orcamentador\\src\\app\\pages\\login\\login.component.html"],"sourcesContent":["import { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnDestroy } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ActivatedRoute, Router, RouterLink } from '@angular/router';\r\nimport { NgxMaskDirective, NgxMaskPipe } from 'ngx-mask';\r\nimport { LoginService } from '../../services/login.service';\r\nimport {\r\n    PreLoginRequest,\r\n    RetornoDadoGeradoUsuarioResponse,\r\n    RetornoUsuariosGeral\r\n} from '../../models/usuarios.model';\r\nimport { AuthService } from '../../services/auth.service';\r\nimport { ToastService } from 'src/app/services/toast.service';\r\n\r\n@Component({\r\n    selector: 'app-login',\r\n    standalone: true,\r\n    imports: [CommonModule, FormsModule, RouterLink, NgxMaskDirective, NgxMaskPipe],\r\n    templateUrl: './login.component.html',\r\n    styleUrls: ['./login.component.css'],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class LoginComponent implements OnDestroy {\r\n    keepMeConnected = false;\r\n    email = '';\r\n    codigoGerado = '';\r\n    enviouCodigo = false;\r\n    enviarDesabilitado = false;\r\n    erroLogin = false;\r\n    usaEmail = true;\r\n    tempoRestante = 0;\r\n    private timer: any;\r\n    private dadosUsuario?: RetornoUsuariosGeral;\r\n\r\n    constructor(\r\n        private api: LoginService,\r\n        private router: Router,\r\n        private route: ActivatedRoute,\r\n        private auth: AuthService,\r\n        private cdr: ChangeDetectorRef,\r\n        private toast: ToastService\r\n    ) {}\r\n\r\n    ngOnDestroy(): void { if (this.timer) clearInterval(this.timer); }\r\n\r\n    onSubmit(): void {\r\n        if (!this.enviouCodigo) {\r\n            this.GerarCodigo();\r\n        } else {\r\n            this.LoginUsuario();\r\n        }\r\n    }\r\n\r\n    reSend(): void {\r\n        if (this.tempoRestante === 0) {\r\n            this.enviarDesabilitado = false;\r\n            this.enviouCodigo = false; // permite GerarCodigo() rodar de novo\r\n            this.cdr.markForCheck();\r\n            this.GerarCodigo();\r\n        }\r\n    }\r\n\r\n    GerarCodigo(): void {\r\n        const body: PreLoginRequest = { email: this.email.trim().toLowerCase() };\r\n        if (!body.email || !/^\\S+@\\S+\\.\\S+$/.test(body.email)) { this.erroLogin = true; this.cdr.markForCheck(); return; }\r\n\r\n        if (!this.enviarDesabilitado && !this.enviouCodigo) {\r\n            this.enviarDesabilitado = true;\r\n            this.cdr.markForCheck(); // opcional: já reflete o disabled\r\n            this.api.PreLogin(body).subscribe({\r\n                next: (resp) => {\r\n                    this.enviouCodigo = true;\r\n                    this.erroLogin = false;\r\n                    this.dadosUsuario = resp.dadosUsuario;\r\n\r\n                    const validade = new Date(resp.validade).getTime();\r\n                    const now = Date.now();\r\n                    this.tempoRestante = Math.max(0, Math.floor((validade - now) / 1000));\r\n                    this.startTimer();\r\n\r\n                    this.enviarDesabilitado = false;   // libera “Confirmar código”\r\n                    this.cdr.markForCheck();           // 👈 força render imediato dos campos de código\r\n                },\r\n                error: () => {\r\n                    this.erroLogin = true;\r\n                    this.enviouCodigo = false;\r\n                    this.enviarDesabilitado = false;\r\n                    if (this.timer) clearInterval(this.timer);\r\n                    this.cdr.markForCheck();           // 👈 reflete erro/estado\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    private startTimer(): void {\r\n        if (this.timer) clearInterval(this.timer);\r\n        this.timer = setInterval(() => {\r\n            if (this.tempoRestante > 0) {\r\n                this.tempoRestante--;\r\n                this.cdr.markForCheck(); // OnPush: atualiza o contador no DOM\r\n            } else {\r\n                clearInterval(this.timer);\r\n                this.timer = null;\r\n                // 👇 expiração: volta ao estado natural e avisa\r\n                this.toast.warn('Código expirou! Tente novamente realizar o login.');\r\n                this.resetForm();        // volta para campo de e-mail + \"Enviar código\"\r\n                this.cdr.markForCheck();\r\n            }\r\n        }, 1000);\r\n    }\r\n\r\n    resetForm(): void {\r\n        this.erroLogin = false;\r\n        this.enviouCodigo = false;\r\n        this.enviarDesabilitado = false;\r\n        this.codigoGerado = '';\r\n        this.tempoRestante = 0;\r\n        if (this.timer) clearInterval(this.timer);\r\n        this.cdr.markForCheck();                 // 👈 reflete o reset imediatamente\r\n    }\r\n\r\n    verificarCodigo(): void {\r\n        this.enviarDesabilitado = !(this.codigoGerado?.toString().length === 6);\r\n    }\r\n\r\n    LoginUsuario(): void {\r\n        if (!this.enviarDesabilitado && this.enviouCodigo && this.dadosUsuario) {\r\n            const du = this.dadosUsuario;\r\n            const email = (du.emailUsuario ?? '').trim().toLowerCase();\r\n            const identifier = email;\r\n\r\n            this.api.Login(du, this.codigoGerado, this.keepMeConnected).subscribe({\r\n                next: (ok) => {\r\n                    if (ok) {\r\n                        if (this.timer) clearInterval(this.timer);\r\n                        this.erroLogin = false;\r\n                        const email = (du.emailUsuario ?? '').trim().toLowerCase();\r\n                        this.auth.login(identifier, 'otp', du.codigoUsuario);\r\n\r\n                        this.toast.show('success', 'Login realizado com sucesso!'); // 👈 aqui\r\n\r\n                        const redirect = this.route.snapshot.queryParamMap.get('redirect');\r\n                        this.router.navigateByUrl(redirect || '/meus');\r\n                    } else {\r\n                        this.erroLogin = true;\r\n                    }\r\n                },\r\n                error: () => { this.erroLogin = true; }\r\n            });\r\n        }\r\n    }\r\n\r\n    formatTime(s: number): string {\r\n        const m = Math.floor(s / 60), r = s % 60;\r\n        return `${m.toString().padStart(2,'0')}:${r.toString().padStart(2,'0')}`;\r\n    }\r\n}\r\n","<div class=\"grid form-shell\">\r\n    <div class=\"card grid\" style=\"gap:16px;\">\r\n        <div style=\"display:flex; align-items:center; justify-content:space-between;\">\r\n            <h2 style=\"margin:0;\">Entrar</h2>\r\n            <div class=\"step-indicator\">Acesse para salvar seus orçamentos</div>\r\n        </div>\r\n\r\n        <!-- FORM ÚNICO -->\r\n        <form class=\"form-shell\" (ngSubmit)=\"onSubmit()\">\r\n            <!-- E-MAIL (desabilita quando já enviou) -->\r\n            <div>\r\n                <label for=\"email\">E-mail</label>\r\n                <input\r\n                        class=\"input\"\r\n                        type=\"email\"\r\n                        id=\"email\"\r\n                        placeholder=\"seu-email@exemplo.com\"\r\n                        name=\"email\"\r\n                        [(ngModel)]=\"email\"\r\n                        [disabled]=\"enviouCodigo\"\r\n                        autocomplete=\"email\"\r\n                        required\r\n                />\r\n            </div>\r\n\r\n            <!-- CÓDIGO + TIMER (aparece após 200) -->\r\n            <div *ngIf=\"enviouCodigo\">\r\n                <label for=\"codigoGerado\">Código de verificação</label>\r\n                <p class=\"small\">Código enviado por e‑mail. Expira em {{ formatTime(tempoRestante) }}.</p>\r\n                <input\r\n                        class=\"input\"\r\n                        type=\"text\"\r\n                        id=\"codigoGerado\"\r\n                        [(ngModel)]=\"codigoGerado\"\r\n                        name=\"codigoGerado\"\r\n                        maxlength=\"6\"\r\n                        placeholder=\"000000\"\r\n                        (ngModelChange)=\"verificarCodigo()\"\r\n                        autocomplete=\"one-time-code\"\r\n                        inputmode=\"numeric\"\r\n                        pattern=\"[0-9]{6}\"\r\n                        required\r\n                />\r\n            </div>\r\n\r\n            <label *ngIf=\"enviouCodigo\" class=\"keep\">\r\n                <input type=\"checkbox\" [(ngModel)]=\"keepMeConnected\" name=\"keepMeConnectedValidation\">\r\n                Mantenha-me conectado\r\n            </label>\r\n\r\n            <!-- AÇÕES -->\r\n            <div class=\"form-actions\">\r\n                <!-- Botão primário: muda de rótulo e função automaticamente -->\r\n                <button\r\n                        class=\"btn btn-primary\"\r\n                        type=\"submit\"\r\n                        [disabled]=\"enviouCodigo ? (enviarDesabilitado || codigoGerado.length !== 6) : (!email || email.length < 5)\"\r\n                >\r\n                    {{ enviouCodigo ? 'Confirmar código' : 'Enviar código' }}\r\n                </button>\r\n\r\n                <!-- Secundários -->\r\n                <button *ngIf=\"enviouCodigo\" type=\"button\" class=\"btn btn-ghost\" (click)=\"resetForm()\">\r\n                    Cancelar\r\n                </button>\r\n\r\n                <!-- o botão SÓ existe quando zerar -->\r\n                <button\r\n                        *ngIf=\"enviouCodigo && tempoRestante === 0\"\r\n                        type=\"button\"\r\n                        class=\"btn btn-ghost\"\r\n                        (click)=\"reSend()\"\r\n                >\r\n                    Reenviar código\r\n                </button>\r\n            </div>\r\n        </form>\r\n\r\n        <!-- ERRO -->\r\n        <div *ngIf=\"erroLogin\" class=\"card\" style=\"border-color:crimson;\">\r\n            <div style=\"display:flex; gap:8px; align-items:center;\">\r\n                <span style=\"font-size:18px;\">⚠️</span>\r\n                <div>\r\n                    <b>Ops! Algo deu errado</b>\r\n                    <div class=\"small\">Verifique seus dados e tente novamente</div>\r\n                </div>\r\n            </div>\r\n            <div style=\"margin-top:8px;\">\r\n                <button class=\"btn btn-ghost\" (click)=\"resetForm()\">Tentar novamente</button>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- AÇÕES SECUNDÁRIAS (fora do form) -->\r\n        <div style=\"display:flex; gap:8px; align-items:center; justify-content:space-between; flex-wrap:wrap;\">\r\n            <div style=\"display:flex; gap:8px; align-items:center;\">\r\n                <a routerLink=\"/novo\" class=\"btn btn-ghost\">Continuar sem login</a>\r\n                <a *ngIf=\"!enviouCodigo\" routerLink=\"/registrar\" class=\"btn btn-ghost\">Registre-se</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}