{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterLink } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/login.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../services/auth.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction LoginComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\")(1, \"label\", 19);\n    i0.…µ…µtext(2, \"C\\u00F3digo de verifica\\u00E7\\u00E3o\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(3, \"p\", 20);\n    i0.…µ…µtext(4);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(5, \"input\", 21);\n    i0.…µ…µtwoWayListener(\"ngModelChange\", function LoginComponent_div_12_Template_input_ngModelChange_5_listener($event) {\n      i0.…µ…µrestoreView(_r1);\n      const ctx_r1 = i0.…µ…µnextContext();\n      i0.…µ…µtwoWayBindingSet(ctx_r1.codigoGerado, $event) || (ctx_r1.codigoGerado = $event);\n      return i0.…µ…µresetView($event);\n    });\n    i0.…µ…µlistener(\"ngModelChange\", function LoginComponent_div_12_Template_input_ngModelChange_5_listener() {\n      i0.…µ…µrestoreView(_r1);\n      const ctx_r1 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r1.verificarCodigo());\n    });\n    i0.…µ…µelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.…µ…µnextContext();\n    i0.…µ…µadvance(4);\n    i0.…µ…µtextInterpolate1(\"C\\u00F3digo enviado por e\\u2011mail. Expira em \", ctx_r1.formatTime(ctx_r1.tempoRestante), \".\");\n    i0.…µ…µadvance();\n    i0.…µ…µtwoWayProperty(\"ngModel\", ctx_r1.codigoGerado);\n  }\n}\nfunction LoginComponent_label_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"label\", 22)(1, \"input\", 23);\n    i0.…µ…µtwoWayListener(\"ngModelChange\", function LoginComponent_label_13_Template_input_ngModelChange_1_listener($event) {\n      i0.…µ…µrestoreView(_r3);\n      const ctx_r1 = i0.…µ…µnextContext();\n      i0.…µ…µtwoWayBindingSet(ctx_r1.keepMeConnected, $event) || (ctx_r1.keepMeConnected = $event);\n      return i0.…µ…µresetView($event);\n    });\n    i0.…µ…µelementEnd();\n    i0.…µ…µtext(2, \" Mantenha-me conectado \");\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.…µ…µnextContext();\n    i0.…µ…µadvance();\n    i0.…µ…µtwoWayProperty(\"ngModel\", ctx_r1.keepMeConnected);\n  }\n}\nfunction LoginComponent_button_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"button\", 24);\n    i0.…µ…µlistener(\"click\", function LoginComponent_button_17_Template_button_click_0_listener() {\n      i0.…µ…µrestoreView(_r4);\n      const ctx_r1 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r1.resetForm());\n    });\n    i0.…µ…µtext(1, \" Cancelar \");\n    i0.…µ…µelementEnd();\n  }\n}\nfunction LoginComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 20);\n    i0.…µ…µtext(1);\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.…µ…µnextContext();\n    i0.…µ…µadvance();\n    i0.…µ…µtextInterpolate1(\" C\\u00F3digo expira em \", ctx_r1.formatTime(ctx_r1.tempoRestante), \" \");\n  }\n}\nfunction LoginComponent_button_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"button\", 24);\n    i0.…µ…µlistener(\"click\", function LoginComponent_button_19_Template_button_click_0_listener() {\n      i0.…µ…µrestoreView(_r5);\n      const ctx_r1 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r1.reSend());\n    });\n    i0.…µ…µtext(1, \" Reenviar c\\u00F3digo \");\n    i0.…µ…µelementEnd();\n  }\n}\nfunction LoginComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 25)(1, \"div\", 16)(2, \"span\", 26);\n    i0.…µ…µtext(3, \"\\u26A0\\uFE0F\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(4, \"div\")(5, \"b\");\n    i0.…µ…µtext(6, \"Ops! Algo deu errado\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(7, \"div\", 20);\n    i0.…µ…µtext(8, \"Verifique seus dados e tente novamente\");\n    i0.…µ…µelementEnd()()();\n    i0.…µ…µelementStart(9, \"div\", 27)(10, \"button\", 28);\n    i0.…µ…µlistener(\"click\", function LoginComponent_div_20_Template_button_click_10_listener() {\n      i0.…µ…µrestoreView(_r6);\n      const ctx_r1 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r1.resetForm());\n    });\n    i0.…µ…µtext(11, \"Tentar novamente\");\n    i0.…µ…µelementEnd()()();\n  }\n}\nexport class LoginComponent {\n  constructor(api, router, route, auth, cdr) {\n    this.api = api;\n    this.router = router;\n    this.route = route;\n    this.auth = auth;\n    this.cdr = cdr;\n    this.keepMeConnected = false;\n    this.email = '';\n    this.codigoGerado = '';\n    this.enviouCodigo = false;\n    this.enviarDesabilitado = false;\n    this.erroLogin = false;\n    this.usaEmail = true;\n    this.tempoRestante = 0;\n  }\n  ngOnDestroy() {\n    if (this.timer) clearInterval(this.timer);\n  }\n  onSubmit() {\n    if (!this.enviouCodigo) {\n      this.GerarCodigo();\n    } else {\n      this.LoginUsuario();\n    }\n  }\n  reSend() {\n    if (this.tempoRestante === 0) {\n      this.enviarDesabilitado = false;\n      this.enviouCodigo = false; // permite GerarCodigo() rodar de novo\n      this.cdr.markForCheck();\n      this.GerarCodigo();\n    }\n  }\n  GerarCodigo() {\n    const body = {\n      email: this.email.trim().toLowerCase()\n    };\n    if (!body.email || !/^\\S+@\\S+\\.\\S+$/.test(body.email)) {\n      this.erroLogin = true;\n      this.cdr.markForCheck();\n      return;\n    }\n    if (!this.enviarDesabilitado && !this.enviouCodigo) {\n      this.enviarDesabilitado = true;\n      this.cdr.markForCheck(); // opcional: j√° reflete o disabled\n      this.api.PreLogin(body).subscribe({\n        next: resp => {\n          this.enviouCodigo = true;\n          this.erroLogin = false;\n          this.dadosUsuario = resp.dadosUsuario;\n          const validade = new Date(resp.validade).getTime();\n          const now = Date.now();\n          this.tempoRestante = Math.max(0, Math.floor((validade - now) / 1000));\n          this.startTimer();\n          this.enviarDesabilitado = false; // libera ‚ÄúConfirmar c√≥digo‚Äù\n          this.cdr.markForCheck(); // üëà for√ßa render imediato dos campos de c√≥digo\n        },\n        error: () => {\n          this.erroLogin = true;\n          this.enviouCodigo = false;\n          this.enviarDesabilitado = false;\n          if (this.timer) clearInterval(this.timer);\n          this.cdr.markForCheck(); // üëà reflete erro/estado\n        }\n      });\n    }\n  }\n  startTimer() {\n    if (this.timer) clearInterval(this.timer);\n    this.timer = setInterval(() => {\n      if (this.tempoRestante > 0) {\n        this.tempoRestante--;\n      } else {\n        // ZEROU: para o timer e mant√©m a tela no estado de confirma√ß√£o\n        clearInterval(this.timer);\n        this.timer = null;\n      }\n      this.cdr.markForCheck(); // OnPush: for√ßa atualiza√ß√£o do template\n    }, 1000);\n  }\n  resetForm() {\n    this.erroLogin = false;\n    this.enviouCodigo = false;\n    this.enviarDesabilitado = false;\n    this.codigoGerado = '';\n    this.tempoRestante = 0;\n    if (this.timer) clearInterval(this.timer);\n    this.cdr.markForCheck(); // üëà reflete o reset imediatamente\n  }\n  verificarCodigo() {\n    this.enviarDesabilitado = !(this.codigoGerado?.toString().length === 6);\n  }\n  LoginUsuario() {\n    if (!this.enviarDesabilitado && this.enviouCodigo && this.dadosUsuario) {\n      const du = this.dadosUsuario;\n      const email = (du.emailUsuario ?? '').trim().toLowerCase();\n      const identifier = email;\n      this.api.Login(du, this.codigoGerado, this.keepMeConnected).subscribe({\n        next: ok => {\n          if (ok) {\n            if (this.timer) clearInterval(this.timer);\n            this.erroLogin = false;\n            this.auth.login(identifier, 'otp');\n            this.toast.show('success', 'Login realizado com sucesso!'); // üëà aqui\n            const redirect = this.route.snapshot.queryParamMap.get('redirect');\n            this.router.navigateByUrl(redirect || '/meus');\n          } else {\n            this.erroLogin = true;\n          }\n        },\n        error: () => {\n          this.erroLogin = true;\n        }\n      });\n    }\n  }\n  formatTime(s) {\n    const m = Math.floor(s / 60),\n      r = s % 60;\n    return `${m.toString().padStart(2, '0')}:${r.toString().padStart(2, '0')}`;\n  }\n  static {\n    this.…µfac = function LoginComponent_Factory(t) {\n      return new (t || LoginComponent)(i0.…µ…µdirectiveInject(i1.LoginService), i0.…µ…µdirectiveInject(i2.Router), i0.…µ…µdirectiveInject(i2.ActivatedRoute), i0.…µ…µdirectiveInject(i3.AuthService), i0.…µ…µdirectiveInject(i0.ChangeDetectorRef));\n    };\n  }\n  static {\n    this.…µcmp = /*@__PURE__*/i0.…µ…µdefineComponent({\n      type: LoginComponent,\n      selectors: [[\"app-login\"]],\n      standalone: true,\n      features: [i0.…µ…µStandaloneFeature],\n      decls: 27,\n      vars: 10,\n      consts: [[1, \"grid\", \"form-shell\"], [1, \"card\", \"grid\", 2, \"gap\", \"16px\"], [2, \"display\", \"flex\", \"align-items\", \"center\", \"justify-content\", \"space-between\"], [2, \"margin\", \"0\"], [1, \"step-indicator\"], [1, \"form-shell\", 3, \"ngSubmit\"], [\"for\", \"email\"], [\"type\", \"email\", \"id\", \"email\", \"placeholder\", \"seu-email@exemplo.com\", \"name\", \"email\", \"autocomplete\", \"email\", \"required\", \"\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\", \"disabled\"], [4, \"ngIf\"], [\"class\", \"keep\", 4, \"ngIf\"], [1, \"form-actions\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"type\", \"button\", \"class\", \"btn btn-ghost\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"small\", 4, \"ngIf\"], [\"class\", \"card\", \"style\", \"border-color:crimson;\", 4, \"ngIf\"], [2, \"display\", \"flex\", \"gap\", \"8px\", \"align-items\", \"center\", \"justify-content\", \"space-between\", \"flex-wrap\", \"wrap\"], [2, \"display\", \"flex\", \"gap\", \"8px\", \"align-items\", \"center\"], [\"routerLink\", \"/novo\", 1, \"btn\", \"btn-ghost\"], [\"routerLink\", \"/registrar\", 1, \"btn\", \"btn-ghost\"], [\"for\", \"codigoGerado\"], [1, \"small\"], [\"type\", \"text\", \"id\", \"codigoGerado\", \"name\", \"codigoGerado\", \"maxlength\", \"6\", \"placeholder\", \"000000\", \"autocomplete\", \"one-time-code\", \"inputmode\", \"numeric\", \"pattern\", \"[0-9]{6}\", \"required\", \"\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\"], [1, \"keep\"], [\"type\", \"checkbox\", \"name\", \"keepMeConnectedValidation\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"button\", 1, \"btn\", \"btn-ghost\", 3, \"click\"], [1, \"card\", 2, \"border-color\", \"crimson\"], [2, \"font-size\", \"18px\"], [2, \"margin-top\", \"8px\"], [1, \"btn\", \"btn-ghost\", 3, \"click\"]],\n      template: function LoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.…µ…µelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h2\", 3);\n          i0.…µ…µtext(4, \"Entrar\");\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(5, \"div\", 4);\n          i0.…µ…µtext(6, \"Acesse para salvar seus or\\u00E7amentos\");\n          i0.…µ…µelementEnd()();\n          i0.…µ…µelementStart(7, \"form\", 5);\n          i0.…µ…µlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_7_listener() {\n            return ctx.onSubmit();\n          });\n          i0.…µ…µelementStart(8, \"div\")(9, \"label\", 6);\n          i0.…µ…µtext(10, \"E-mail\");\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(11, \"input\", 7);\n          i0.…µ…µtwoWayListener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_11_listener($event) {\n            i0.…µ…µtwoWayBindingSet(ctx.email, $event) || (ctx.email = $event);\n            return $event;\n          });\n          i0.…µ…µelementEnd()();\n          i0.…µ…µtemplate(12, LoginComponent_div_12_Template, 6, 2, \"div\", 8)(13, LoginComponent_label_13_Template, 3, 1, \"label\", 9);\n          i0.…µ…µelementStart(14, \"div\", 10)(15, \"button\", 11);\n          i0.…µ…µtext(16);\n          i0.…µ…µelementEnd();\n          i0.…µ…µtemplate(17, LoginComponent_button_17_Template, 2, 0, \"button\", 12)(18, LoginComponent_div_18_Template, 2, 1, \"div\", 13)(19, LoginComponent_button_19_Template, 2, 0, \"button\", 12);\n          i0.…µ…µelementEnd()();\n          i0.…µ…µtemplate(20, LoginComponent_div_20_Template, 12, 0, \"div\", 14);\n          i0.…µ…µelementStart(21, \"div\", 15)(22, \"div\", 16)(23, \"a\", 17);\n          i0.…µ…µtext(24, \"Continuar sem login\");\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(25, \"a\", 18);\n          i0.…µ…µtext(26, \"Registre-se\");\n          i0.…µ…µelementEnd()()()()();\n        }\n        if (rf & 2) {\n          i0.…µ…µadvance(11);\n          i0.…µ…µtwoWayProperty(\"ngModel\", ctx.email);\n          i0.…µ…µproperty(\"disabled\", ctx.enviouCodigo);\n          i0.…µ…µadvance();\n          i0.…µ…µproperty(\"ngIf\", ctx.enviouCodigo);\n          i0.…µ…µadvance();\n          i0.…µ…µproperty(\"ngIf\", ctx.enviouCodigo);\n          i0.…µ…µadvance(2);\n          i0.…µ…µproperty(\"disabled\", ctx.enviouCodigo ? ctx.enviarDesabilitado || ctx.codigoGerado.length !== 6 : !ctx.email || ctx.email.length < 5);\n          i0.…µ…µadvance();\n          i0.…µ…µtextInterpolate1(\" \", ctx.enviouCodigo ? \"Confirmar c\\u00F3digo\" : \"Enviar c\\u00F3digo\", \" \");\n          i0.…µ…µadvance();\n          i0.…µ…µproperty(\"ngIf\", ctx.enviouCodigo);\n          i0.…µ…µadvance();\n          i0.…µ…µproperty(\"ngIf\", ctx.enviouCodigo && ctx.tempoRestante > 0);\n          i0.…µ…µadvance();\n          i0.…µ…µproperty(\"ngIf\", ctx.enviouCodigo && ctx.tempoRestante === 0);\n          i0.…µ…µadvance();\n          i0.…µ…µproperty(\"ngIf\", ctx.erroLogin);\n        }\n      },\n      dependencies: [CommonModule, i4.NgIf, FormsModule, i5.…µNgNoValidate, i5.DefaultValueAccessor, i5.CheckboxControlValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.MaxLengthValidator, i5.PatternValidator, i5.NgModel, i5.NgForm, RouterLink],\n      styles: [\"form.form-shell[_ngcontent-%COMP%] {\\n    display: flex;\\n    flex-direction: column;\\n    gap: 16px;\\n}\\n\\n.keep[_ngcontent-%COMP%] {\\n    display: flex;\\n    gap: 8px;\\n    align-items: center;\\n    font-size: 14px;\\n}\\n\\n.form-actions[_ngcontent-%COMP%] {\\n    display: flex;\\n    gap: 12px;\\n    flex-wrap: wrap;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvbG9naW4vbG9naW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIsU0FBUztBQUNiOztBQUVBO0lBQ0ksYUFBYTtJQUNiLFFBQVE7SUFDUixtQkFBbUI7SUFDbkIsZUFBZTtBQUNuQjs7QUFFQTtJQUNJLGFBQWE7SUFDYixTQUFTO0lBQ1QsZUFBZTtBQUNuQiIsInNvdXJjZXNDb250ZW50IjpbImZvcm0uZm9ybS1zaGVsbCB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgIGdhcDogMTZweDtcclxufVxyXG5cclxuLmtlZXAge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGdhcDogOHB4O1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIGZvbnQtc2l6ZTogMTRweDtcclxufVxyXG5cclxuLmZvcm0tYWN0aW9ucyB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZ2FwOiAxMnB4O1xyXG4gICAgZmxleC13cmFwOiB3cmFwO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"],\n      changeDetection: 0\n    });\n  }\n}","map":{"version":3,"names":["CommonModule","FormsModule","RouterLink","i0","…µ…µelementStart","…µ…µtext","…µ…µelementEnd","…µ…µtwoWayListener","LoginComponent_div_12_Template_input_ngModelChange_5_listener","$event","…µ…µrestoreView","_r1","ctx_r1","…µ…µnextContext","…µ…µtwoWayBindingSet","codigoGerado","…µ…µresetView","…µ…µlistener","verificarCodigo","…µ…µadvance","…µ…µtextInterpolate1","formatTime","tempoRestante","…µ…µtwoWayProperty","LoginComponent_label_13_Template_input_ngModelChange_1_listener","_r3","keepMeConnected","LoginComponent_button_17_Template_button_click_0_listener","_r4","resetForm","LoginComponent_button_19_Template_button_click_0_listener","_r5","reSend","LoginComponent_div_20_Template_button_click_10_listener","_r6","LoginComponent","constructor","api","router","route","auth","cdr","email","enviouCodigo","enviarDesabilitado","erroLogin","usaEmail","ngOnDestroy","timer","clearInterval","onSubmit","GerarCodigo","LoginUsuario","markForCheck","body","trim","toLowerCase","test","PreLogin","subscribe","next","resp","dadosUsuario","validade","Date","getTime","now","Math","max","floor","startTimer","error","setInterval","toString","length","du","emailUsuario","identifier","Login","ok","login","toast","show","redirect","snapshot","queryParamMap","get","navigateByUrl","s","m","r","padStart","…µ…µdirectiveInject","i1","LoginService","i2","Router","ActivatedRoute","i3","AuthService","ChangeDetectorRef","selectors","standalone","features","…µ…µStandaloneFeature","decls","vars","consts","template","LoginComponent_Template","rf","ctx","LoginComponent_Template_form_ngSubmit_7_listener","LoginComponent_Template_input_ngModelChange_11_listener","…µ…µtemplate","LoginComponent_div_12_Template","LoginComponent_label_13_Template","LoginComponent_button_17_Template","LoginComponent_div_18_Template","LoginComponent_button_19_Template","LoginComponent_div_20_Template","…µ…µproperty","i4","NgIf","i5","…µNgNoValidate","DefaultValueAccessor","CheckboxControlValueAccessor","NgControlStatus","NgControlStatusGroup","RequiredValidator","MaxLengthValidator","PatternValidator","NgModel","NgForm","styles","changeDetection"],"sources":["G:\\Estudos\\Angular\\Orcamentador\\src\\app\\pages\\login\\login.component.ts","G:\\Estudos\\Angular\\Orcamentador\\src\\app\\pages\\login\\login.component.html"],"sourcesContent":["import { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnDestroy } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ActivatedRoute, Router, RouterLink } from '@angular/router';\r\nimport { NgxMaskDirective, NgxMaskPipe } from 'ngx-mask';\r\nimport { LoginService } from '../../services/login.service';\r\nimport {\r\n    PreLoginRequest,\r\n    RetornoDadoGeradoUsuarioResponse,\r\n    RetornoUsuariosGeral\r\n} from '../../models/usuarios.model';\r\nimport { AuthService } from '../../services/auth.service';\r\n\r\n@Component({\r\n    selector: 'app-login',\r\n    standalone: true,\r\n    imports: [CommonModule, FormsModule, RouterLink, NgxMaskDirective, NgxMaskPipe],\r\n    templateUrl: './login.component.html',\r\n    styleUrls: ['./login.component.css'],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class LoginComponent implements OnDestroy {\r\n    keepMeConnected = false;\r\n    email = '';\r\n    codigoGerado = '';\r\n    enviouCodigo = false;\r\n    enviarDesabilitado = false;\r\n    erroLogin = false;\r\n    usaEmail = true;\r\n    tempoRestante = 0;\r\n    private timer: any;\r\n    private dadosUsuario?: RetornoUsuariosGeral;\r\n\r\n    constructor(\r\n        private api: LoginService,\r\n        private router: Router,\r\n        private route: ActivatedRoute,\r\n        private auth: AuthService,\r\n        private cdr: ChangeDetectorRef\r\n    ) {}\r\n\r\n    ngOnDestroy(): void { if (this.timer) clearInterval(this.timer); }\r\n\r\n    onSubmit(): void {\r\n        if (!this.enviouCodigo) {\r\n            this.GerarCodigo();\r\n        } else {\r\n            this.LoginUsuario();\r\n        }\r\n    }\r\n\r\n    reSend(): void {\r\n        if (this.tempoRestante === 0) {\r\n            this.enviarDesabilitado = false;\r\n            this.enviouCodigo = false; // permite GerarCodigo() rodar de novo\r\n            this.cdr.markForCheck();\r\n            this.GerarCodigo();\r\n        }\r\n    }\r\n\r\n    GerarCodigo(): void {\r\n        const body: PreLoginRequest = { email: this.email.trim().toLowerCase() };\r\n        if (!body.email || !/^\\S+@\\S+\\.\\S+$/.test(body.email)) { this.erroLogin = true; this.cdr.markForCheck(); return; }\r\n\r\n        if (!this.enviarDesabilitado && !this.enviouCodigo) {\r\n            this.enviarDesabilitado = true;\r\n            this.cdr.markForCheck(); // opcional: j√° reflete o disabled\r\n            this.api.PreLogin(body).subscribe({\r\n                next: (resp) => {\r\n                    this.enviouCodigo = true;\r\n                    this.erroLogin = false;\r\n                    this.dadosUsuario = resp.dadosUsuario;\r\n\r\n                    const validade = new Date(resp.validade).getTime();\r\n                    const now = Date.now();\r\n                    this.tempoRestante = Math.max(0, Math.floor((validade - now) / 1000));\r\n                    this.startTimer();\r\n\r\n                    this.enviarDesabilitado = false;   // libera ‚ÄúConfirmar c√≥digo‚Äù\r\n                    this.cdr.markForCheck();           // üëà for√ßa render imediato dos campos de c√≥digo\r\n                },\r\n                error: () => {\r\n                    this.erroLogin = true;\r\n                    this.enviouCodigo = false;\r\n                    this.enviarDesabilitado = false;\r\n                    if (this.timer) clearInterval(this.timer);\r\n                    this.cdr.markForCheck();           // üëà reflete erro/estado\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    private startTimer(): void {\r\n        if (this.timer) clearInterval(this.timer);\r\n        this.timer = setInterval(() => {\r\n            if (this.tempoRestante > 0) {\r\n                this.tempoRestante--;\r\n            } else {\r\n                // ZEROU: para o timer e mant√©m a tela no estado de confirma√ß√£o\r\n                clearInterval(this.timer);\r\n                this.timer = null;\r\n            }\r\n            this.cdr.markForCheck(); // OnPush: for√ßa atualiza√ß√£o do template\r\n        }, 1000);\r\n    }\r\n\r\n    resetForm(): void {\r\n        this.erroLogin = false;\r\n        this.enviouCodigo = false;\r\n        this.enviarDesabilitado = false;\r\n        this.codigoGerado = '';\r\n        this.tempoRestante = 0;\r\n        if (this.timer) clearInterval(this.timer);\r\n        this.cdr.markForCheck();                 // üëà reflete o reset imediatamente\r\n    }\r\n\r\n    verificarCodigo(): void {\r\n        this.enviarDesabilitado = !(this.codigoGerado?.toString().length === 6);\r\n    }\r\n\r\n    LoginUsuario(): void {\r\n        if (!this.enviarDesabilitado && this.enviouCodigo && this.dadosUsuario) {\r\n            const du = this.dadosUsuario;\r\n            const email = (du.emailUsuario ?? '').trim().toLowerCase();\r\n            const identifier = email;\r\n\r\n            this.api.Login(du, this.codigoGerado, this.keepMeConnected).subscribe({\r\n                next: (ok) => {\r\n                    if (ok) {\r\n                        if (this.timer) clearInterval(this.timer);\r\n                        this.erroLogin = false;\r\n                        this.auth.login(identifier, 'otp');\r\n                        this.toast.show('success', 'Login realizado com sucesso!'); // üëà aqui\r\n                        const redirect = this.route.snapshot.queryParamMap.get('redirect');\r\n                        this.router.navigateByUrl(redirect || '/meus');\r\n                    } else {\r\n                        this.erroLogin = true;\r\n                    }\r\n                },\r\n                error: () => { this.erroLogin = true; }\r\n            });\r\n        }\r\n    }\r\n\r\n    formatTime(s: number): string {\r\n        const m = Math.floor(s / 60), r = s % 60;\r\n        return `${m.toString().padStart(2,'0')}:${r.toString().padStart(2,'0')}`;\r\n    }\r\n}\r\n","<div class=\"grid form-shell\">\r\n    <div class=\"card grid\" style=\"gap:16px;\">\r\n        <div style=\"display:flex; align-items:center; justify-content:space-between;\">\r\n            <h2 style=\"margin:0;\">Entrar</h2>\r\n            <div class=\"step-indicator\">Acesse para salvar seus or√ßamentos</div>\r\n        </div>\r\n\r\n        <!-- FORM √öNICO -->\r\n        <form class=\"form-shell\" (ngSubmit)=\"onSubmit()\">\r\n            <!-- E-MAIL (desabilita quando j√° enviou) -->\r\n            <div>\r\n                <label for=\"email\">E-mail</label>\r\n                <input\r\n                        class=\"input\"\r\n                        type=\"email\"\r\n                        id=\"email\"\r\n                        placeholder=\"seu-email@exemplo.com\"\r\n                        name=\"email\"\r\n                        [(ngModel)]=\"email\"\r\n                        [disabled]=\"enviouCodigo\"\r\n                        autocomplete=\"email\"\r\n                        required\r\n                />\r\n            </div>\r\n\r\n            <!-- C√ìDIGO + TIMER (aparece ap√≥s 200) -->\r\n            <div *ngIf=\"enviouCodigo\">\r\n                <label for=\"codigoGerado\">C√≥digo de verifica√ß√£o</label>\r\n                <p class=\"small\">C√≥digo enviado por e‚Äëmail. Expira em {{ formatTime(tempoRestante) }}.</p>\r\n                <input\r\n                        class=\"input\"\r\n                        type=\"text\"\r\n                        id=\"codigoGerado\"\r\n                        [(ngModel)]=\"codigoGerado\"\r\n                        name=\"codigoGerado\"\r\n                        maxlength=\"6\"\r\n                        placeholder=\"000000\"\r\n                        (ngModelChange)=\"verificarCodigo()\"\r\n                        autocomplete=\"one-time-code\"\r\n                        inputmode=\"numeric\"\r\n                        pattern=\"[0-9]{6}\"\r\n                        required\r\n                />\r\n            </div>\r\n\r\n            <label *ngIf=\"enviouCodigo\" class=\"keep\">\r\n                <input type=\"checkbox\" [(ngModel)]=\"keepMeConnected\" name=\"keepMeConnectedValidation\">\r\n                Mantenha-me conectado\r\n            </label>\r\n\r\n            <!-- A√á√ïES -->\r\n            <div class=\"form-actions\">\r\n                <!-- Bot√£o prim√°rio: muda de r√≥tulo e fun√ß√£o automaticamente -->\r\n                <button\r\n                        class=\"btn btn-primary\"\r\n                        type=\"submit\"\r\n                        [disabled]=\"enviouCodigo ? (enviarDesabilitado || codigoGerado.length !== 6) : (!email || email.length < 5)\"\r\n                >\r\n                    {{ enviouCodigo ? 'Confirmar c√≥digo' : 'Enviar c√≥digo' }}\r\n                </button>\r\n\r\n                <!-- Secund√°rios -->\r\n                <button *ngIf=\"enviouCodigo\" type=\"button\" class=\"btn btn-ghost\" (click)=\"resetForm()\">\r\n                    Cancelar\r\n                </button>\r\n\r\n                <div *ngIf=\"enviouCodigo && tempoRestante > 0\" class=\"small\">\r\n                    C√≥digo expira em {{ formatTime(tempoRestante) }}\r\n                </div>\r\n\r\n                <!-- o bot√£o S√ì existe quando zerar -->\r\n                <button\r\n                        *ngIf=\"enviouCodigo && tempoRestante === 0\"\r\n                        type=\"button\"\r\n                        class=\"btn btn-ghost\"\r\n                        (click)=\"reSend()\"\r\n                >\r\n                    Reenviar c√≥digo\r\n                </button>\r\n            </div>\r\n        </form>\r\n\r\n        <!-- ERRO -->\r\n        <div *ngIf=\"erroLogin\" class=\"card\" style=\"border-color:crimson;\">\r\n            <div style=\"display:flex; gap:8px; align-items:center;\">\r\n                <span style=\"font-size:18px;\">‚ö†Ô∏è</span>\r\n                <div>\r\n                    <b>Ops! Algo deu errado</b>\r\n                    <div class=\"small\">Verifique seus dados e tente novamente</div>\r\n                </div>\r\n            </div>\r\n            <div style=\"margin-top:8px;\">\r\n                <button class=\"btn btn-ghost\" (click)=\"resetForm()\">Tentar novamente</button>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- A√á√ïES SECUND√ÅRIAS (fora do form) -->\r\n        <div style=\"display:flex; gap:8px; align-items:center; justify-content:space-between; flex-wrap:wrap;\">\r\n            <div style=\"display:flex; gap:8px; align-items:center;\">\r\n                <a routerLink=\"/novo\" class=\"btn btn-ghost\">Continuar sem login</a>\r\n                <a routerLink=\"/registrar\" class=\"btn btn-ghost\">Registre-se</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}