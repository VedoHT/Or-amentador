{"ast":null,"code":"import { RouterLink, RouterOutlet } from '@angular/router';\nimport { NgIf } from \"@angular/common\";\nimport { ToastContainerComponent } from './components/toast-container/toast-container.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./services/auth.service\";\nimport * as i2 from \"./services/login.service\";\nimport * as i3 from \"@angular/router\";\nfunction AppComponent_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementContainerStart(0);\n    i0.…µ…µelementStart(1, \"a\", 9);\n    i0.…µ…µtext(2, \"Meus Or\\u00E7amentos\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(3, \"button\", 10);\n    i0.…µ…µlistener(\"click\", function AppComponent_ng_container_7_Template_button_click_3_listener() {\n      i0.…µ…µrestoreView(_r2);\n      const ctx_r2 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r2.logout());\n    });\n    i0.…µ…µtext(4, \"Sair\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementContainerEnd();\n  }\n}\nfunction AppComponent_ng_template_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"a\", 11);\n    i0.…µ…µtext(1, \"Login\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(2, \"a\", 12);\n    i0.…µ…µtext(3, \"Registre-se\");\n    i0.…µ…µelementEnd();\n  }\n}\nexport class AppComponent {\n  constructor(auth, loginSvc, router) {\n    this.auth = auth;\n    this.loginSvc = loginSvc;\n    this.router = router;\n    this.theme = 'dark';\n  }\n  get logged() {\n    return this.auth.isLoggedIn();\n  }\n  ngOnInit() {\n    const saved = localStorage.getItem('theme') || (window.matchMedia?.('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');\n    this._applyTheme(saved);\n  }\n  toggleTheme() {\n    this._applyTheme(this.theme === 'dark' ? 'light' : 'dark');\n  }\n  logout() {\n    this.loginSvc.Logout().subscribe({\n      next: () => {\n        this.auth.logoutLocal(); // limpa sess√£o local\n        this.router.navigate(['/login']); // üëà redireciona sempre\n      },\n      error: () => {\n        // mesmo que o backend falhe, for√ßa logout e navega\n        this.auth.logoutLocal();\n        this.router.navigate(['/login']); // üëà redireciona\n      }\n    });\n  }\n  _applyTheme(t) {\n    this.theme = t;\n    document.documentElement.setAttribute('data-theme', t);\n    localStorage.setItem('theme', t);\n  }\n  static {\n    this.…µfac = function AppComponent_Factory(t) {\n      return new (t || AppComponent)(i0.…µ…µdirectiveInject(i1.AuthService), i0.…µ…µdirectiveInject(i2.LoginService), i0.…µ…µdirectiveInject(i3.Router));\n    };\n  }\n  static {\n    this.…µcmp = /*@__PURE__*/i0.…µ…µdefineComponent({\n      type: AppComponent,\n      selectors: [[\"app-root\"]],\n      standalone: true,\n      features: [i0.…µ…µStandaloneFeature],\n      decls: 17,\n      vars: 3,\n      consts: [[\"showLogin\", \"\"], [1, \"header\"], [\"routerLink\", \"/\", \"aria-label\", \"Ir para in\\u00EDcio\", 1, \"brand\"], [1, \"brand-badge\"], [1, \"nav-right\"], [4, \"ngIf\", \"ngIfElse\"], [\"routerLink\", \"/novo\", 1, \"btn\", \"btn-primary\"], [1, \"btn\", \"btn-ghost\", 3, \"click\"], [1, \"container\", \"grid\"], [\"routerLink\", \"/meus\", 1, \"nav-link\"], [1, \"nav-link\", 3, \"click\"], [\"routerLink\", \"/login\", 1, \"btn\", \"btn-ghost\"], [\"routerLink\", \"/registrar\", 1, \"btn\", \"btn-ghost\"]],\n      template: function AppComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.…µ…µgetCurrentView();\n          i0.…µ…µelementStart(0, \"header\", 1)(1, \"a\", 2)(2, \"span\", 3);\n          i0.…µ…µtext(3, \"\\uD83D\\uDEE0\\uFE0F\");\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(4, \"span\");\n          i0.…µ…µtext(5, \"Or\\u00E7amento por Partes\");\n          i0.…µ…µelementEnd()();\n          i0.…µ…µelementStart(6, \"nav\", 4);\n          i0.…µ…µtemplate(7, AppComponent_ng_container_7_Template, 5, 0, \"ng-container\", 5)(8, AppComponent_ng_template_8_Template, 4, 0, \"ng-template\", null, 0, i0.…µ…µtemplateRefExtractor);\n          i0.…µ…µelementStart(10, \"a\", 6);\n          i0.…µ…µtext(11, \"Novo Or\\u00E7amento\");\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(12, \"button\", 7);\n          i0.…µ…µlistener(\"click\", function AppComponent_Template_button_click_12_listener() {\n            i0.…µ…µrestoreView(_r1);\n            return i0.…µ…µresetView(ctx.toggleTheme());\n          });\n          i0.…µ…µtext(13);\n          i0.…µ…µelementEnd()()();\n          i0.…µ…µelementStart(14, \"main\", 8);\n          i0.…µ…µelement(15, \"router-outlet\")(16, \"app-toast-container\");\n          i0.…µ…µelementEnd();\n        }\n        if (rf & 2) {\n          const showLogin_r4 = i0.…µ…µreference(9);\n          i0.…µ…µadvance(7);\n          i0.…µ…µproperty(\"ngIf\", ctx.logged)(\"ngIfElse\", showLogin_r4);\n          i0.…µ…µadvance(6);\n          i0.…µ…µtextInterpolate1(\" \", ctx.theme === \"dark\" ? \"Tema claro\" : \"Tema escuro\", \" \");\n        }\n      },\n      dependencies: [RouterOutlet, RouterLink, NgIf, ToastContainerComponent],\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"names":["RouterLink","RouterOutlet","NgIf","ToastContainerComponent","i0","…µ…µelementContainerStart","…µ…µelementStart","…µ…µtext","…µ…µelementEnd","…µ…µlistener","AppComponent_ng_container_7_Template_button_click_3_listener","…µ…µrestoreView","_r2","ctx_r2","…µ…µnextContext","…µ…µresetView","logout","AppComponent","constructor","auth","loginSvc","router","theme","logged","isLoggedIn","ngOnInit","saved","localStorage","getItem","window","matchMedia","matches","_applyTheme","toggleTheme","Logout","subscribe","next","logoutLocal","navigate","error","t","document","documentElement","setAttribute","setItem","…µ…µdirectiveInject","i1","AuthService","i2","LoginService","i3","Router","selectors","standalone","features","…µ…µStandaloneFeature","decls","vars","consts","template","AppComponent_Template","rf","ctx","…µ…µtemplate","AppComponent_ng_container_7_Template","AppComponent_ng_template_8_Template","…µ…µtemplateRefExtractor","AppComponent_Template_button_click_12_listener","_r1","…µ…µelement","…µ…µadvance","…µ…µproperty","showLogin_r4","…µ…µtextInterpolate1","encapsulation"],"sources":["G:\\Estudos\\Angular\\Orcamentador\\src\\app\\app.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport {Router, RouterLink, RouterOutlet } from '@angular/router';\nimport { AuthService } from './services/auth.service';\nimport {NgIf} from \"@angular/common\";\nimport { ToastContainerComponent } from './components/toast-container/toast-container.component';\nimport { LoginService } from './services/login.service';\n\n@Component({\n  selector: 'app-root',\n  standalone: true,\n  imports: [RouterOutlet, RouterLink, NgIf, ToastContainerComponent],\n  template: `\n    <header class=\"header\">\n      <a routerLink=\"/\" class=\"brand\" aria-label=\"Ir para in√≠cio\">\n        <span class=\"brand-badge\">üõ†Ô∏è</span>\n        <span>Or√ßamento por Partes</span>\n      </a>\n\n      <nav class=\"nav-right\">\n        <!-- Se logado: mostra Meus Or√ßamentos + Sair; sen√£o: mostra Login -->\n        <ng-container *ngIf=\"logged; else showLogin\">\n          <a routerLink=\"/meus\" class=\"nav-link\">Meus Or√ßamentos</a>\n          <button class=\"nav-link\" (click)=\"logout()\">Sair</button>\n        </ng-container>\n        <ng-template #showLogin>\n          <a routerLink=\"/login\" class=\"btn btn-ghost\">Login</a>\n          <a routerLink=\"/registrar\" class=\"btn btn-ghost\">Registre-se</a>\n        </ng-template>\n\n        <!-- Sempre vis√≠vel -->\n        <a routerLink=\"/novo\" class=\"btn btn-primary\">Novo Or√ßamento</a>\n\n        <!-- Tema -->\n        <button class=\"btn btn-ghost\" (click)=\"toggleTheme()\">\n          {{ theme === 'dark' ? 'Tema claro' : 'Tema escuro' }}\n        </button>\n      </nav>\n    </header>\n\n    <main class=\"container grid\">\n      <router-outlet></router-outlet>\n      <app-toast-container></app-toast-container>\n    </main>\n  `\n})\nexport class AppComponent implements OnInit {\n  theme: 'light' | 'dark' = 'dark';\n\n  constructor(private auth: AuthService, private loginSvc: LoginService, private router: Router  ) {}\n  get logged(): boolean { return this.auth.isLoggedIn(); }\n\n  ngOnInit() {\n    const saved = (localStorage.getItem('theme') as 'light'|'dark') || (window.matchMedia?.('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');\n    this._applyTheme(saved);\n  }\n  toggleTheme() { this._applyTheme(this.theme === 'dark' ? 'light' : 'dark'); }\n\n  logout() {\n    this.loginSvc.Logout().subscribe({\n      next: () => {\n        this.auth.logoutLocal();         // limpa sess√£o local\n        this.router.navigate(['/login']); // üëà redireciona sempre\n      },\n      error: () => {\n        // mesmo que o backend falhe, for√ßa logout e navega\n        this.auth.logoutLocal();\n        this.router.navigate(['/login']); // üëà redireciona\n      }\n    });\n  }\n\n  private _applyTheme(t: 'light'|'dark') { this.theme = t; document.documentElement.setAttribute('data-theme', t); localStorage.setItem('theme', t); }\n}\n"],"mappings":"AACA,SAAgBA,UAAU,EAAEC,YAAY,QAAQ,iBAAiB;AAEjE,SAAQC,IAAI,QAAO,iBAAiB;AACpC,SAASC,uBAAuB,QAAQ,wDAAwD;;;;;;;;IAgBxFC,EAAA,CAAAC,uBAAA,GAA6C;IAC3CD,EAAA,CAAAE,cAAA,WAAuC;IAAAF,EAAA,CAAAG,MAAA,2BAAe;IAAAH,EAAA,CAAAI,YAAA,EAAI;IAC1DJ,EAAA,CAAAE,cAAA,iBAA4C;IAAnBF,EAAA,CAAAK,UAAA,mBAAAC,6DAAA;MAAAN,EAAA,CAAAO,aAAA,CAAAC,GAAA;MAAA,MAAAC,MAAA,GAAAT,EAAA,CAAAU,aAAA;MAAA,OAAAV,EAAA,CAAAW,WAAA,CAASF,MAAA,CAAAG,MAAA,EAAQ;IAAA,EAAC;IAACZ,EAAA,CAAAG,MAAA,WAAI;IAAAH,EAAA,CAAAI,YAAA,EAAS;;;;;;IAGzDJ,EAAA,CAAAE,cAAA,YAA6C;IAAAF,EAAA,CAAAG,MAAA,YAAK;IAAAH,EAAA,CAAAI,YAAA,EAAI;IACtDJ,EAAA,CAAAE,cAAA,YAAiD;IAAAF,EAAA,CAAAG,MAAA,kBAAW;IAAAH,EAAA,CAAAI,YAAA,EAAI;;;AAmB1E,OAAM,MAAOS,YAAY;EAGvBC,YAAoBC,IAAiB,EAAUC,QAAsB,EAAUC,MAAc;IAAzE,KAAAF,IAAI,GAAJA,IAAI;IAAuB,KAAAC,QAAQ,GAARA,QAAQ;IAAwB,KAAAC,MAAM,GAANA,MAAM;IAFrF,KAAAC,KAAK,GAAqB,MAAM;EAEkE;EAClG,IAAIC,MAAMA,CAAA;IAAc,OAAO,IAAI,CAACJ,IAAI,CAACK,UAAU,EAAE;EAAE;EAEvDC,QAAQA,CAAA;IACN,MAAMC,KAAK,GAAIC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAoB,KAAKC,MAAM,CAACC,UAAU,GAAG,8BAA8B,CAAC,CAACC,OAAO,GAAG,MAAM,GAAG,OAAO,CAAC;IACnJ,IAAI,CAACC,WAAW,CAACN,KAAK,CAAC;EACzB;EACAO,WAAWA,CAAA;IAAK,IAAI,CAACD,WAAW,CAAC,IAAI,CAACV,KAAK,KAAK,MAAM,GAAG,OAAO,GAAG,MAAM,CAAC;EAAE;EAE5EN,MAAMA,CAAA;IACJ,IAAI,CAACI,QAAQ,CAACc,MAAM,EAAE,CAACC,SAAS,CAAC;MAC/BC,IAAI,EAAEA,CAAA,KAAK;QACT,IAAI,CAACjB,IAAI,CAACkB,WAAW,EAAE,CAAC,CAAS;QACjC,IAAI,CAAChB,MAAM,CAACiB,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;MACpC,CAAC;MACDC,KAAK,EAAEA,CAAA,KAAK;QACV;QACA,IAAI,CAACpB,IAAI,CAACkB,WAAW,EAAE;QACvB,IAAI,CAAChB,MAAM,CAACiB,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;MACpC;KACD,CAAC;EACJ;EAEQN,WAAWA,CAACQ,CAAiB;IAAI,IAAI,CAAClB,KAAK,GAAGkB,CAAC;IAAEC,QAAQ,CAACC,eAAe,CAACC,YAAY,CAAC,YAAY,EAAEH,CAAC,CAAC;IAAEb,YAAY,CAACiB,OAAO,CAAC,OAAO,EAAEJ,CAAC,CAAC;EAAE;;;uBA1BxIvB,YAAY,EAAAb,EAAA,CAAAyC,iBAAA,CAAAC,EAAA,CAAAC,WAAA,GAAA3C,EAAA,CAAAyC,iBAAA,CAAAG,EAAA,CAAAC,YAAA,GAAA7C,EAAA,CAAAyC,iBAAA,CAAAK,EAAA,CAAAC,MAAA;IAAA;EAAA;;;YAAZlC,YAAY;MAAAmC,SAAA;MAAAC,UAAA;MAAAC,QAAA,GAAAlD,EAAA,CAAAmD,mBAAA;MAAAC,KAAA;MAAAC,IAAA;MAAAC,MAAA;MAAAC,QAAA,WAAAC,sBAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;;UA/BjBzD,EAFJ,CAAAE,cAAA,gBAAuB,WACuC,cAChC;UAAAF,EAAA,CAAAG,MAAA,yBAAG;UAAAH,EAAA,CAAAI,YAAA,EAAO;UACpCJ,EAAA,CAAAE,cAAA,WAAM;UAAAF,EAAA,CAAAG,MAAA,gCAAoB;UAC5BH,EAD4B,CAAAI,YAAA,EAAO,EAC/B;UAEJJ,EAAA,CAAAE,cAAA,aAAuB;UAMrBF,EAJA,CAAA2D,UAAA,IAAAC,oCAAA,0BAA6C,IAAAC,mCAAA,gCAAA7D,EAAA,CAAA8D,sBAAA,CAIrB;UAMxB9D,EAAA,CAAAE,cAAA,YAA8C;UAAAF,EAAA,CAAAG,MAAA,2BAAc;UAAAH,EAAA,CAAAI,YAAA,EAAI;UAGhEJ,EAAA,CAAAE,cAAA,iBAAsD;UAAxBF,EAAA,CAAAK,UAAA,mBAAA0D,+CAAA;YAAA/D,EAAA,CAAAO,aAAA,CAAAyD,GAAA;YAAA,OAAAhE,EAAA,CAAAW,WAAA,CAAS+C,GAAA,CAAA7B,WAAA,EAAa;UAAA,EAAC;UACnD7B,EAAA,CAAAG,MAAA,IACF;UAEJH,EAFI,CAAAI,YAAA,EAAS,EACL,EACC;UAETJ,EAAA,CAAAE,cAAA,eAA6B;UAE3BF,EADA,CAAAiE,SAAA,qBAA+B,2BACY;UAC7CjE,EAAA,CAAAI,YAAA,EAAO;;;;UAtBYJ,EAAA,CAAAkE,SAAA,GAAc;UAAAlE,EAAd,CAAAmE,UAAA,SAAAT,GAAA,CAAAvC,MAAA,CAAc,aAAAiD,YAAA,CAAc;UAczCpE,EAAA,CAAAkE,SAAA,GACF;UADElE,EAAA,CAAAqE,kBAAA,MAAAX,GAAA,CAAAxC,KAAA,gDACF;;;qBAzBIrB,YAAY,EAAED,UAAU,EAAEE,IAAI,EAAEC,uBAAuB;MAAAuE,aAAA;IAAA;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}