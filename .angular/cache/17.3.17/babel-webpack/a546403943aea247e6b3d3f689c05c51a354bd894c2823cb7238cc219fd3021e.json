{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterLink } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/login.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../services/auth.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction LoginComponent_form_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 10);\n    i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_form_6_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.GerarCodigo());\n    });\n    i0.ɵɵelementStart(1, \"div\", 11)(2, \"label\", 12);\n    i0.ɵɵtext(3, \"E-mail\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"input\", 13);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_form_6_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.email, $event) || (ctx_r1.email = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"button\", 14);\n    i0.ɵɵtext(6, \" Enviar C\\u00F3digo \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function LoginComponent_form_6_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.utilizaEmail());\n    });\n    i0.ɵɵtext(8, \" Prefere usar telefone? \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.email);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.enviouCodigo);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", !ctx_r1.email || ctx_r1.email.length < 5);\n  }\n}\nfunction LoginComponent_form_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 10);\n    i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_form_7_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.GerarCodigo());\n    });\n    i0.ɵɵelementStart(1, \"div\", 11)(2, \"label\", 16);\n    i0.ɵɵtext(3, \"N\\u00FAmero de Telefone\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 17);\n    i0.ɵɵtext(5, \"Enviaremos um c\\u00F3digo via WhatsApp\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"input\", 18);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_form_7_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.telefone, $event) || (ctx_r1.telefone = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"button\", 14);\n    i0.ɵɵtext(8, \" Enviar C\\u00F3digo \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function LoginComponent_form_7_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.utilizaEmail());\n    });\n    i0.ɵɵtext(10, \" Prefere usar e-mail? \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.telefone);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.enviouCodigo);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", !ctx_r1.telefone || ctx_r1.telefone.length < 10);\n  }\n}\nfunction LoginComponent_form_8_span_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"C\\u00F3digo expira em \", ctx_r1.formatTime(ctx_r1.tempoRestante), \"\");\n  }\n}\nfunction LoginComponent_form_8_span_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Reenviar c\\u00F3digo\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_form_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 10);\n    i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_form_8_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.LoginUsuario());\n    });\n    i0.ɵɵelementStart(1, \"div\", 11)(2, \"label\", 19);\n    i0.ɵɵtext(3, \"C\\u00F3digo de Verifica\\u00E7\\u00E3o\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 17);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"input\", 20);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_form_8_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.codigoGerado, $event) || (ctx_r1.codigoGerado = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_form_8_Template_input_ngModelChange_6_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.verificarCodigo());\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"label\", 21)(8, \"input\", 22);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_form_8_Template_input_ngModelChange_8_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.keepMeConnected, $event) || (ctx_r1.keepMeConnected = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \" Mantenha-me conectado \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 14);\n    i0.ɵɵtext(11, \" Entrar \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function LoginComponent_form_8_Template_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.resetForm());\n    });\n    i0.ɵɵtemplate(13, LoginComponent_form_8_span_13_Template, 2, 1, \"span\", 23)(14, LoginComponent_form_8_span_14_Template, 2, 0, \"span\", 23);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"C\\u00F3digo enviado via \", ctx_r1.usaEmail ? \"e-mail\" : \"WhatsApp\", \"\");\n    i0.ɵɵadvance();\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.codigoGerado);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.keepMeConnected);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.enviarDesabilitado || ctx_r1.codigoGerado.length !== 6);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.tempoRestante > 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.tempoRestante === 0);\n  }\n}\nfunction LoginComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"div\", 25)(2, \"span\", 26);\n    i0.ɵɵtext(3, \"\\u26A0\\uFE0F\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\")(5, \"h3\");\n    i0.ɵɵtext(6, \"Ops! Algo deu errado\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8, \"Verifique seus dados e tente novamente\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function LoginComponent_div_9_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.resetForm());\n    });\n    i0.ɵɵtext(10, \"Tentar Novamente\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class LoginComponent {\n  constructor(api, router, auth) {\n    this.api = api;\n    this.router = router;\n    this.auth = auth;\n    this.temaEscuroAtivo = document.documentElement.getAttribute('data-theme') === 'dark';\n    this.keepMeConnected = false;\n    this.telefone = '';\n    this.email = '';\n    this.codigoGerado = '';\n    this.enviouCodigo = false;\n    this.enviarDesabilitado = false;\n    this.erroLogin = false;\n    this.usaEmail = true;\n    this.tempoRestante = 0;\n  }\n  ngOnDestroy() {\n    if (this.timer) clearInterval(this.timer);\n  }\n  alternarTema() {\n    this.temaEscuroAtivo = !this.temaEscuroAtivo;\n    const t = this.temaEscuroAtivo ? 'dark' : 'light';\n    document.documentElement.setAttribute('data-theme', t);\n    localStorage.setItem('theme', t);\n  }\n  utilizaEmail() {\n    this.usaEmail = !this.usaEmail;\n  }\n  GerarCodigo() {\n    const body = {\n      email: this.usaEmail ? this.email : undefined,\n      telefone: this.usaEmail ? undefined : this.telefone\n    };\n    if (!this.enviarDesabilitado && !this.enviouCodigo) {\n      this.enviarDesabilitado = true;\n      this.api.PreLogin(body).subscribe({\n        next: resp => {\n          this.enviouCodigo = true;\n          this.erroLogin = false;\n          this.dadosUsuario = resp.dadosUsuario;\n          const validade = new Date(resp.validade).getTime();\n          const now = Date.now();\n          this.tempoRestante = Math.max(0, Math.floor((validade - now) / 1000));\n          this.startTimer();\n        },\n        error: () => {\n          this.erroLogin = true;\n          this.enviouCodigo = false;\n          this.enviarDesabilitado = false;\n          if (this.timer) clearInterval(this.timer);\n        }\n      });\n    }\n  }\n  startTimer() {\n    if (this.timer) clearInterval(this.timer);\n    this.timer = setInterval(() => {\n      if (this.tempoRestante > 0) {\n        this.tempoRestante--;\n      } else {\n        this.resetForm();\n      }\n    }, 1000);\n  }\n  verificarCodigo() {\n    this.enviarDesabilitado = !(this.codigoGerado?.toString().length === 6);\n  }\n  LoginUsuario() {\n    if (!this.enviarDesabilitado && this.enviouCodigo && this.dadosUsuario) {\n      if (this.dadosUsuario.emailUsuario === null) this.dadosUsuario.emailUsuario = '';\n      this.api.Login(this.dadosUsuario, this.codigoGerado, this.keepMeConnected).subscribe({\n        next: ok => {\n          if (ok) {\n            if (this.timer) clearInterval(this.timer);\n            this.erroLogin = false;\n            // marca sessão local do nosso app:\n            this.auth.login(this.dadosUsuario.emailUsuario || `tel:${this.dadosUsuario.telefoneUsuario || ''}`, 'otp');\n            this.router.navigate(['/meus']);\n          } else {\n            this.erroLogin = true;\n          }\n        },\n        error: () => {\n          this.erroLogin = true;\n        }\n      });\n    }\n  }\n  resetForm() {\n    this.erroLogin = false;\n    this.enviouCodigo = false;\n    this.enviarDesabilitado = false;\n    this.telefone = '';\n    this.codigoGerado = '';\n    this.tempoRestante = 0;\n    if (this.timer) clearInterval(this.timer);\n  }\n  formatTime(s) {\n    const m = Math.floor(s / 60);\n    const r = s % 60;\n    return `${m.toString().padStart(2, '0')}:${r.toString().padStart(2, '0')}`;\n  }\n  static {\n    this.ɵfac = function LoginComponent_Factory(t) {\n      return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.LoginService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.AuthService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoginComponent,\n      selectors: [[\"app-login\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 15,\n      vars: 7,\n      consts: [[1, \"login-fullscreen-container\"], [1, \"login-modal-wrapper\"], [1, \"login-modal\", \"card\"], [1, \"logo-wrapper\"], [1, \"brand-badge\"], [\"class\", \"login-form\", 3, \"ngSubmit\", 4, \"ngIf\"], [\"class\", \"error-state\", 4, \"ngIf\"], [1, \"login-footer\", \"small\"], [\"routerLink\", \"/novo\", 1, \"btn\", \"btn-ghost\"], [\"type\", \"button\", 1, \"btn\", \"btn-ghost\", 3, \"click\"], [1, \"login-form\", 3, \"ngSubmit\"], [1, \"input-group\"], [\"for\", \"email\"], [\"type\", \"email\", \"id\", \"email\", \"placeholder\", \"seu-email@exemplo.com\", \"name\", \"email\", \"autocomplete\", \"email\", \"required\", \"\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\", \"disabled\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"type\", \"button\", 1, \"login-switch\", 3, \"click\"], [\"for\", \"telefone\"], [1, \"login-minitext\"], [\"type\", \"tel\", \"id\", \"telefone\", \"placeholder\", \"(00) 00000-0000\", \"name\", \"telefone\", \"autocomplete\", \"tel\", \"required\", \"\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\", \"disabled\"], [\"for\", \"codigoGerado\"], [\"type\", \"text\", \"id\", \"codigoGerado\", \"name\", \"codigoGerado\", \"maxlength\", \"6\", \"placeholder\", \"000000\", \"autocomplete\", \"one-time-code\", \"inputmode\", \"numeric\", \"pattern\", \"[0-9]{6}\", \"required\", \"\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\"], [1, \"keep\"], [\"type\", \"checkbox\", \"name\", \"keepMeConnectedValidation\", 3, \"ngModelChange\", \"ngModel\"], [4, \"ngIf\"], [1, \"error-state\"], [1, \"error-message\"], [1, \"error-icon\"], [1, \"btn\", \"btn-ghost\", 3, \"click\"]],\n      template: function LoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"span\", 4);\n          i0.ɵɵtext(5, \"\\uD83D\\uDEE0\\uFE0F\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(6, LoginComponent_form_6_Template, 9, 3, \"form\", 5)(7, LoginComponent_form_7_Template, 11, 3, \"form\", 5)(8, LoginComponent_form_8_Template, 15, 6, \"form\", 5)(9, LoginComponent_div_9_Template, 11, 0, \"div\", 6);\n          i0.ɵɵelementStart(10, \"div\", 7)(11, \"a\", 8);\n          i0.ɵɵtext(12, \"Voltar\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"button\", 9);\n          i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_13_listener() {\n            return ctx.alternarTema();\n          });\n          i0.ɵɵtext(14);\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵclassProp(\"dark-theme\", ctx.temaEscuroAtivo);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", ctx.usaEmail && !ctx.enviouCodigo);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.usaEmail && !ctx.enviouCodigo);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.enviouCodigo);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.erroLogin);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate1(\" \", ctx.temaEscuroAtivo ? \"Tema claro\" : \"Tema escuro\", \" \");\n        }\n      },\n      dependencies: [CommonModule, i4.NgIf, FormsModule, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.CheckboxControlValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.MaxLengthValidator, i5.PatternValidator, i5.NgModel, i5.NgForm, RouterLink],\n      styles: [\".login-fullscreen-container[_ngcontent-%COMP%] { min-height: calc(100dvh - 80px); display:flex; align-items:center; justify-content:center; }\\n.login-modal-wrapper[_ngcontent-%COMP%] { width:100%; max-width: 480px; padding: 16px; }\\n.login-modal[_ngcontent-%COMP%] { display:grid; gap:16px; }\\n.logo-wrapper[_ngcontent-%COMP%] { display:flex; justify-content:center; }\\n.login-form[_ngcontent-%COMP%] { display:flex; flex-direction:column; gap:12px; }\\n.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] { font-weight:700; }\\n.login-minitext[_ngcontent-%COMP%] { font-size:12px; color: var(--muted); margin: 4px 0 0; }\\n.keep[_ngcontent-%COMP%] { display:flex; gap:8px; align-items:center; font-size: 14px; }\\n.login-switch[_ngcontent-%COMP%] { border:none; background:transparent; color: var(--accent); cursor:pointer; text-align:left; }\\n.error-state[_ngcontent-%COMP%] { border:1px solid color-mix(in oklab, crimson 30%, var(--bg)); border-radius:12px; padding:12px; }\\n.error-message[_ngcontent-%COMP%] { display:flex; gap:8px; align-items:center; }\\n.error-icon[_ngcontent-%COMP%] { font-size:18px; }\\n.login-footer[_ngcontent-%COMP%] { display:flex; gap:8px; justify-content:space-between; align-items:center; }\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvbG9naW4vbG9naW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSw4QkFBOEIsK0JBQStCLEVBQUUsWUFBWSxFQUFFLGtCQUFrQixFQUFFLHNCQUFzQixFQUFFO0FBQ3pILHVCQUF1QixVQUFVLEVBQUUsZ0JBQWdCLEVBQUUsYUFBYSxFQUFFO0FBQ3BFLGVBQWUsWUFBWSxFQUFFLFFBQVEsRUFBRTtBQUN2QyxnQkFBZ0IsWUFBWSxFQUFFLHNCQUFzQixFQUFFO0FBQ3RELGNBQWMsWUFBWSxFQUFFLHFCQUFxQixFQUFFLFFBQVEsRUFBRTtBQUM3RCxxQkFBcUIsZUFBZSxFQUFFO0FBQ3RDLGtCQUFrQixjQUFjLEVBQUUsbUJBQW1CLEVBQUUsZUFBZSxFQUFFO0FBQ3hFLFFBQVEsWUFBWSxFQUFFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxlQUFlLEVBQUU7QUFDcEUsZ0JBQWdCLFdBQVcsRUFBRSxzQkFBc0IsRUFBRSxvQkFBb0IsRUFBRSxjQUFjLEVBQUUsZUFBZSxFQUFFO0FBQzVHLGVBQWUsNERBQTRELEVBQUUsa0JBQWtCLEVBQUUsWUFBWSxFQUFFO0FBQy9HLGlCQUFpQixZQUFZLEVBQUUsT0FBTyxFQUFFLGtCQUFrQixFQUFFO0FBQzVELGNBQWMsY0FBYyxFQUFFO0FBQzlCLGdCQUFnQixZQUFZLEVBQUUsT0FBTyxFQUFFLDZCQUE2QixFQUFFLGtCQUFrQixFQUFFIiwic291cmNlc0NvbnRlbnQiOlsiLmxvZ2luLWZ1bGxzY3JlZW4tY29udGFpbmVyIHsgbWluLWhlaWdodDogY2FsYygxMDBkdmggLSA4MHB4KTsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IH1cclxuLmxvZ2luLW1vZGFsLXdyYXBwZXIgeyB3aWR0aDoxMDAlOyBtYXgtd2lkdGg6IDQ4MHB4OyBwYWRkaW5nOiAxNnB4OyB9XHJcbi5sb2dpbi1tb2RhbCB7IGRpc3BsYXk6Z3JpZDsgZ2FwOjE2cHg7IH1cclxuLmxvZ28td3JhcHBlciB7IGRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgfVxyXG4ubG9naW4tZm9ybSB7IGRpc3BsYXk6ZmxleDsgZmxleC1kaXJlY3Rpb246Y29sdW1uOyBnYXA6MTJweDsgfVxyXG4uaW5wdXQtZ3JvdXAgbGFiZWwgeyBmb250LXdlaWdodDo3MDA7IH1cclxuLmxvZ2luLW1pbml0ZXh0IHsgZm9udC1zaXplOjEycHg7IGNvbG9yOiB2YXIoLS1tdXRlZCk7IG1hcmdpbjogNHB4IDAgMDsgfVxyXG4ua2VlcCB7IGRpc3BsYXk6ZmxleDsgZ2FwOjhweDsgYWxpZ24taXRlbXM6Y2VudGVyOyBmb250LXNpemU6IDE0cHg7IH1cclxuLmxvZ2luLXN3aXRjaCB7IGJvcmRlcjpub25lOyBiYWNrZ3JvdW5kOnRyYW5zcGFyZW50OyBjb2xvcjogdmFyKC0tYWNjZW50KTsgY3Vyc29yOnBvaW50ZXI7IHRleHQtYWxpZ246bGVmdDsgfVxyXG4uZXJyb3Itc3RhdGUgeyBib3JkZXI6MXB4IHNvbGlkIGNvbG9yLW1peChpbiBva2xhYiwgY3JpbXNvbiAzMCUsIHZhcigtLWJnKSk7IGJvcmRlci1yYWRpdXM6MTJweDsgcGFkZGluZzoxMnB4OyB9XHJcbi5lcnJvci1tZXNzYWdlIHsgZGlzcGxheTpmbGV4OyBnYXA6OHB4OyBhbGlnbi1pdGVtczpjZW50ZXI7IH1cclxuLmVycm9yLWljb24geyBmb250LXNpemU6MThweDsgfVxyXG4ubG9naW4tZm9vdGVyIHsgZGlzcGxheTpmbGV4OyBnYXA6OHB4OyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6Y2VudGVyOyB9XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"],\n      changeDetection: 0\n    });\n  }\n}","map":{"version":3,"names":["CommonModule","FormsModule","RouterLink","i0","ɵɵelementStart","ɵɵlistener","LoginComponent_form_6_Template_form_ngSubmit_0_listener","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","GerarCodigo","ɵɵtext","ɵɵelementEnd","ɵɵtwoWayListener","LoginComponent_form_6_Template_input_ngModelChange_4_listener","$event","ɵɵtwoWayBindingSet","email","LoginComponent_form_6_Template_button_click_7_listener","utilizaEmail","ɵɵadvance","ɵɵtwoWayProperty","ɵɵproperty","enviouCodigo","length","LoginComponent_form_7_Template_form_ngSubmit_0_listener","_r3","LoginComponent_form_7_Template_input_ngModelChange_6_listener","telefone","LoginComponent_form_7_Template_button_click_9_listener","ɵɵtextInterpolate1","formatTime","tempoRestante","LoginComponent_form_8_Template_form_ngSubmit_0_listener","_r4","LoginUsuario","LoginComponent_form_8_Template_input_ngModelChange_6_listener","codigoGerado","verificarCodigo","LoginComponent_form_8_Template_input_ngModelChange_8_listener","keepMeConnected","LoginComponent_form_8_Template_button_click_12_listener","resetForm","ɵɵtemplate","LoginComponent_form_8_span_13_Template","LoginComponent_form_8_span_14_Template","usaEmail","enviarDesabilitado","LoginComponent_div_9_Template_button_click_9_listener","_r5","LoginComponent","constructor","api","router","auth","temaEscuroAtivo","document","documentElement","getAttribute","erroLogin","ngOnDestroy","timer","clearInterval","alternarTema","t","setAttribute","localStorage","setItem","body","undefined","PreLogin","subscribe","next","resp","dadosUsuario","validade","Date","getTime","now","Math","max","floor","startTimer","error","setInterval","toString","emailUsuario","Login","ok","login","telefoneUsuario","navigate","s","m","r","padStart","ɵɵdirectiveInject","i1","LoginService","i2","Router","i3","AuthService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","LoginComponent_Template","rf","ctx","LoginComponent_form_6_Template","LoginComponent_form_7_Template","LoginComponent_form_8_Template","LoginComponent_div_9_Template","LoginComponent_Template_button_click_13_listener","ɵɵclassProp","i4","NgIf","i5","ɵNgNoValidate","DefaultValueAccessor","CheckboxControlValueAccessor","NgControlStatus","NgControlStatusGroup","RequiredValidator","MaxLengthValidator","PatternValidator","NgModel","NgForm","styles","changeDetection"],"sources":["G:\\Estudos\\Angular\\Orcamentador\\src\\app\\pages\\login\\login.component.ts","G:\\Estudos\\Angular\\Orcamentador\\src\\app\\pages\\login\\login.component.html"],"sourcesContent":["import { ChangeDetectionStrategy, Component, OnDestroy } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Router, RouterLink } from '@angular/router';\r\nimport { LoginService } from '../../services/login.service';\r\nimport {\r\n    PreLoginRequest,\r\n    RetornoDadoGeradoUsuarioResponse,\r\n    RetornoUsuariosGeral\r\n} from '../../models/usuarios.model';\r\nimport { AuthService } from '../../services/auth.service';\r\n\r\n@Component({\r\n    selector: 'app-login',\r\n    standalone: true,\r\n    imports: [CommonModule, FormsModule, RouterLink],\r\n    templateUrl: './login.component.html',\r\n    styleUrls: ['./login.component.css'],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class LoginComponent implements OnDestroy {\r\n    temaEscuroAtivo = document.documentElement.getAttribute('data-theme') === 'dark';\r\n    keepMeConnected = false;\r\n    telefone = '';\r\n    email = '';\r\n    codigoGerado = '';\r\n    enviouCodigo = false;\r\n    enviarDesabilitado = false;\r\n    erroLogin = false;\r\n    usaEmail = true;\r\n    tempoRestante = 0;\r\n    private timer: any;\r\n    private dadosUsuario?: RetornoUsuariosGeral;\r\n\r\n    constructor(\r\n        private api: LoginService,\r\n        private router: Router,\r\n        private auth: AuthService\r\n    ) {}\r\n\r\n    ngOnDestroy(): void {\r\n        if (this.timer) clearInterval(this.timer);\r\n    }\r\n\r\n    alternarTema(): void {\r\n        this.temaEscuroAtivo = !this.temaEscuroAtivo;\r\n        const t = this.temaEscuroAtivo ? 'dark' : 'light';\r\n        document.documentElement.setAttribute('data-theme', t);\r\n        localStorage.setItem('theme', t);\r\n    }\r\n\r\n    utilizaEmail(): void { this.usaEmail = !this.usaEmail; }\r\n\r\n    GerarCodigo(): void {\r\n        const body: PreLoginRequest = { email: this.usaEmail ? this.email : undefined, telefone: this.usaEmail ? undefined : this.telefone };\r\n\r\n        if (!this.enviarDesabilitado && !this.enviouCodigo) {\r\n            this.enviarDesabilitado = true;\r\n            this.api.PreLogin(body).subscribe({\r\n                next: (resp: RetornoDadoGeradoUsuarioResponse) => {\r\n                    this.enviouCodigo = true;\r\n                    this.erroLogin = false;\r\n                    this.dadosUsuario = resp.dadosUsuario;\r\n\r\n                    const validade = new Date(resp.validade).getTime();\r\n                    const now = Date.now();\r\n                    this.tempoRestante = Math.max(0, Math.floor((validade - now) / 1000));\r\n                    this.startTimer();\r\n                },\r\n                error: () => {\r\n                    this.erroLogin = true;\r\n                    this.enviouCodigo = false;\r\n                    this.enviarDesabilitado = false;\r\n                    if (this.timer) clearInterval(this.timer);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    private startTimer(): void {\r\n        if (this.timer) clearInterval(this.timer);\r\n        this.timer = setInterval(() => {\r\n            if (this.tempoRestante > 0) {\r\n                this.tempoRestante--;\r\n            } else {\r\n                this.resetForm();\r\n            }\r\n        }, 1000);\r\n    }\r\n\r\n    verificarCodigo(): void {\r\n        this.enviarDesabilitado = !(this.codigoGerado?.toString().length === 6);\r\n    }\r\n\r\n    LoginUsuario(): void {\r\n        if (!this.enviarDesabilitado && this.enviouCodigo && this.dadosUsuario) {\r\n            if (this.dadosUsuario.emailUsuario === null) this.dadosUsuario.emailUsuario = '';\r\n            this.api.Login(this.dadosUsuario, this.codigoGerado, this.keepMeConnected).subscribe({\r\n                next: (ok) => {\r\n                    if (ok) {\r\n                        if (this.timer) clearInterval(this.timer);\r\n                        this.erroLogin = false;\r\n                        // marca sessão local do nosso app:\r\n                        this.auth.login(this.dadosUsuario.emailUsuario || `tel:${this.dadosUsuario.telefoneUsuario || ''}`, 'otp');\r\n                        this.router.navigate(['/meus']);\r\n                    } else {\r\n                        this.erroLogin = true;\r\n                    }\r\n                },\r\n                error: () => {\r\n                    this.erroLogin = true;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    resetForm(): void {\r\n        this.erroLogin = false;\r\n        this.enviouCodigo = false;\r\n        this.enviarDesabilitado = false;\r\n        this.telefone = '';\r\n        this.codigoGerado = '';\r\n        this.tempoRestante = 0;\r\n        if (this.timer) clearInterval(this.timer);\r\n    }\r\n\r\n    formatTime(s: number): string {\r\n        const m = Math.floor(s / 60);\r\n        const r = s % 60;\r\n        return `${m.toString().padStart(2,'0')}:${r.toString().padStart(2,'0')}`;\r\n    }\r\n}\r\n","<div class=\"login-fullscreen-container\" [class.dark-theme]=\"temaEscuroAtivo\">\r\n    <div class=\"login-modal-wrapper\">\r\n        <div class=\"login-modal card\">\r\n            <!-- Logo (opcional) -->\r\n            <div class=\"logo-wrapper\">\r\n                <span class=\"brand-badge\">🛠️</span>\r\n            </div>\r\n\r\n            <!-- Login por E-mail -->\r\n            <form class=\"login-form\" (ngSubmit)=\"GerarCodigo()\" *ngIf=\"usaEmail && !enviouCodigo\">\r\n                <div class=\"input-group\">\r\n                    <label for=\"email\">E-mail</label>\r\n                    <input\r\n                            class=\"input\"\r\n                            type=\"email\"\r\n                            id=\"email\"\r\n                            placeholder=\"seu-email@exemplo.com\"\r\n                            name=\"email\"\r\n                            [(ngModel)]=\"email\"\r\n                            [disabled]=\"enviouCodigo\"\r\n                            autocomplete=\"email\"\r\n                            required\r\n                    />\r\n                </div>\r\n\r\n                <button class=\"btn btn-primary\" [disabled]=\"!email || email.length < 5\" type=\"submit\">\r\n                    Enviar Código\r\n                </button>\r\n\r\n                <button type=\"button\" class=\"login-switch\" (click)=\"utilizaEmail()\">\r\n                    Prefere usar telefone?\r\n                </button>\r\n            </form>\r\n\r\n            <!-- Login por Telefone -->\r\n            <form class=\"login-form\" (ngSubmit)=\"GerarCodigo()\" *ngIf=\"!usaEmail && !enviouCodigo\">\r\n                <div class=\"input-group\">\r\n                    <label for=\"telefone\">Número de Telefone</label>\r\n                    <p class=\"login-minitext\">Enviaremos um código via WhatsApp</p>\r\n                    <input\r\n                            class=\"input\"\r\n                            type=\"tel\"\r\n                            id=\"telefone\"\r\n                            placeholder=\"(00) 00000-0000\"\r\n                            name=\"telefone\"\r\n                            [(ngModel)]=\"telefone\"\r\n                            [disabled]=\"enviouCodigo\"\r\n                            autocomplete=\"tel\"\r\n                            required\r\n                    />\r\n                </div>\r\n\r\n                <button class=\"btn btn-primary\" [disabled]=\"!telefone || telefone.length < 10\" type=\"submit\">\r\n                    Enviar Código\r\n                </button>\r\n\r\n                <button type=\"button\" class=\"login-switch\" (click)=\"utilizaEmail()\">\r\n                    Prefere usar e-mail?\r\n                </button>\r\n            </form>\r\n\r\n            <!-- Validação de Código -->\r\n            <form *ngIf=\"enviouCodigo\" class=\"login-form\" (ngSubmit)=\"LoginUsuario()\">\r\n                <div class=\"input-group\">\r\n                    <label for=\"codigoGerado\">Código de Verificação</label>\r\n                    <p class=\"login-minitext\">Código enviado via {{ usaEmail ? 'e-mail' : 'WhatsApp' }}</p>\r\n                    <input\r\n                            class=\"input\"\r\n                            type=\"text\"\r\n                            id=\"codigoGerado\"\r\n                            [(ngModel)]=\"codigoGerado\"\r\n                            name=\"codigoGerado\"\r\n                            maxlength=\"6\"\r\n                            placeholder=\"000000\"\r\n                            (ngModelChange)=\"verificarCodigo()\"\r\n                            autocomplete=\"one-time-code\"\r\n                            inputmode=\"numeric\"\r\n                            pattern=\"[0-9]{6}\"\r\n                            required\r\n                    />\r\n                </div>\r\n\r\n                <label class=\"keep\">\r\n                    <input type=\"checkbox\" [(ngModel)]=\"keepMeConnected\" name=\"keepMeConnectedValidation\">\r\n                    Mantenha-me conectado\r\n                </label>\r\n\r\n                <button class=\"btn btn-primary\" [disabled]=\"enviarDesabilitado || codigoGerado.length !== 6\" type=\"submit\">\r\n                    Entrar\r\n                </button>\r\n\r\n                <button type=\"button\" class=\"login-switch\" (click)=\"resetForm()\">\r\n                    <span *ngIf=\"tempoRestante > 0\">Código expira em {{ formatTime(tempoRestante) }}</span>\r\n                    <span *ngIf=\"tempoRestante === 0\">Reenviar código</span>\r\n                </button>\r\n            </form>\r\n\r\n            <!-- Estado de Erro -->\r\n            <div *ngIf=\"erroLogin\" class=\"error-state\">\r\n                <div class=\"error-message\">\r\n                    <span class=\"error-icon\">⚠️</span>\r\n                    <div>\r\n                        <h3>Ops! Algo deu errado</h3>\r\n                        <p>Verifique seus dados e tente novamente</p>\r\n                    </div>\r\n                </div>\r\n                <button class=\"btn btn-ghost\" (click)=\"resetForm()\">Tentar Novamente</button>\r\n            </div>\r\n\r\n            <div class=\"login-footer small\">\r\n                <a routerLink=\"/novo\" class=\"btn btn-ghost\">Voltar</a>\r\n                <button class=\"btn btn-ghost\" type=\"button\" (click)=\"alternarTema()\">\r\n                    {{ temaEscuroAtivo ? 'Tema claro' : 'Tema escuro' }}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n"],"mappings":"AACA,SAASA,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,WAAW,QAAQ,gBAAgB;AAC5C,SAAiBC,UAAU,QAAQ,iBAAiB;;;;;;;;;;ICMxCC,EAAA,CAAAC,cAAA,eAAsF;IAA7DD,EAAA,CAAAE,UAAA,sBAAAC,wDAAA;MAAAH,EAAA,CAAAI,aAAA,CAAAC,GAAA;MAAA,MAAAC,MAAA,GAAAN,EAAA,CAAAO,aAAA;MAAA,OAAAP,EAAA,CAAAQ,WAAA,CAAYF,MAAA,CAAAG,WAAA,EAAa;IAAA,EAAC;IAE3CT,EADJ,CAAAC,cAAA,cAAyB,gBACF;IAAAD,EAAA,CAAAU,MAAA,aAAM;IAAAV,EAAA,CAAAW,YAAA,EAAQ;IACjCX,EAAA,CAAAC,cAAA,gBAUE;IAJMD,EAAA,CAAAY,gBAAA,2BAAAC,8DAAAC,MAAA;MAAAd,EAAA,CAAAI,aAAA,CAAAC,GAAA;MAAA,MAAAC,MAAA,GAAAN,EAAA,CAAAO,aAAA;MAAAP,EAAA,CAAAe,kBAAA,CAAAT,MAAA,CAAAU,KAAA,EAAAF,MAAA,MAAAR,MAAA,CAAAU,KAAA,GAAAF,MAAA;MAAA,OAAAd,EAAA,CAAAQ,WAAA,CAAAM,MAAA;IAAA,EAAmB;IAK/Bd,EAXI,CAAAW,YAAA,EAUE,EACA;IAENX,EAAA,CAAAC,cAAA,iBAAsF;IAClFD,EAAA,CAAAU,MAAA,2BACJ;IAAAV,EAAA,CAAAW,YAAA,EAAS;IAETX,EAAA,CAAAC,cAAA,iBAAoE;IAAzBD,EAAA,CAAAE,UAAA,mBAAAe,uDAAA;MAAAjB,EAAA,CAAAI,aAAA,CAAAC,GAAA;MAAA,MAAAC,MAAA,GAAAN,EAAA,CAAAO,aAAA;MAAA,OAAAP,EAAA,CAAAQ,WAAA,CAASF,MAAA,CAAAY,YAAA,EAAc;IAAA,EAAC;IAC/DlB,EAAA,CAAAU,MAAA,+BACJ;IACJV,EADI,CAAAW,YAAA,EAAS,EACN;;;;IAdSX,EAAA,CAAAmB,SAAA,GAAmB;IAAnBnB,EAAA,CAAAoB,gBAAA,YAAAd,MAAA,CAAAU,KAAA,CAAmB;IACnBhB,EAAA,CAAAqB,UAAA,aAAAf,MAAA,CAAAgB,YAAA,CAAyB;IAMLtB,EAAA,CAAAmB,SAAA,EAAuC;IAAvCnB,EAAA,CAAAqB,UAAA,cAAAf,MAAA,CAAAU,KAAA,IAAAV,MAAA,CAAAU,KAAA,CAAAO,MAAA,KAAuC;;;;;;IAU3EvB,EAAA,CAAAC,cAAA,eAAuF;IAA9DD,EAAA,CAAAE,UAAA,sBAAAsB,wDAAA;MAAAxB,EAAA,CAAAI,aAAA,CAAAqB,GAAA;MAAA,MAAAnB,MAAA,GAAAN,EAAA,CAAAO,aAAA;MAAA,OAAAP,EAAA,CAAAQ,WAAA,CAAYF,MAAA,CAAAG,WAAA,EAAa;IAAA,EAAC;IAE3CT,EADJ,CAAAC,cAAA,cAAyB,gBACC;IAAAD,EAAA,CAAAU,MAAA,8BAAkB;IAAAV,EAAA,CAAAW,YAAA,EAAQ;IAChDX,EAAA,CAAAC,cAAA,YAA0B;IAAAD,EAAA,CAAAU,MAAA,6CAAiC;IAAAV,EAAA,CAAAW,YAAA,EAAI;IAC/DX,EAAA,CAAAC,cAAA,gBAUE;IAJMD,EAAA,CAAAY,gBAAA,2BAAAc,8DAAAZ,MAAA;MAAAd,EAAA,CAAAI,aAAA,CAAAqB,GAAA;MAAA,MAAAnB,MAAA,GAAAN,EAAA,CAAAO,aAAA;MAAAP,EAAA,CAAAe,kBAAA,CAAAT,MAAA,CAAAqB,QAAA,EAAAb,MAAA,MAAAR,MAAA,CAAAqB,QAAA,GAAAb,MAAA;MAAA,OAAAd,EAAA,CAAAQ,WAAA,CAAAM,MAAA;IAAA,EAAsB;IAKlCd,EAXI,CAAAW,YAAA,EAUE,EACA;IAENX,EAAA,CAAAC,cAAA,iBAA6F;IACzFD,EAAA,CAAAU,MAAA,2BACJ;IAAAV,EAAA,CAAAW,YAAA,EAAS;IAETX,EAAA,CAAAC,cAAA,iBAAoE;IAAzBD,EAAA,CAAAE,UAAA,mBAAA0B,uDAAA;MAAA5B,EAAA,CAAAI,aAAA,CAAAqB,GAAA;MAAA,MAAAnB,MAAA,GAAAN,EAAA,CAAAO,aAAA;MAAA,OAAAP,EAAA,CAAAQ,WAAA,CAASF,MAAA,CAAAY,YAAA,EAAc;IAAA,EAAC;IAC/DlB,EAAA,CAAAU,MAAA,8BACJ;IACJV,EADI,CAAAW,YAAA,EAAS,EACN;;;;IAdSX,EAAA,CAAAmB,SAAA,GAAsB;IAAtBnB,EAAA,CAAAoB,gBAAA,YAAAd,MAAA,CAAAqB,QAAA,CAAsB;IACtB3B,EAAA,CAAAqB,UAAA,aAAAf,MAAA,CAAAgB,YAAA,CAAyB;IAMLtB,EAAA,CAAAmB,SAAA,EAA8C;IAA9CnB,EAAA,CAAAqB,UAAA,cAAAf,MAAA,CAAAqB,QAAA,IAAArB,MAAA,CAAAqB,QAAA,CAAAJ,MAAA,MAA8C;;;;;IAwC1EvB,EAAA,CAAAC,cAAA,WAAgC;IAAAD,EAAA,CAAAU,MAAA,GAAgD;IAAAV,EAAA,CAAAW,YAAA,EAAO;;;;IAAvDX,EAAA,CAAAmB,SAAA,EAAgD;IAAhDnB,EAAA,CAAA6B,kBAAA,2BAAAvB,MAAA,CAAAwB,UAAA,CAAAxB,MAAA,CAAAyB,aAAA,MAAgD;;;;;IAChF/B,EAAA,CAAAC,cAAA,WAAkC;IAAAD,EAAA,CAAAU,MAAA,2BAAe;IAAAV,EAAA,CAAAW,YAAA,EAAO;;;;;;IA/BhEX,EAAA,CAAAC,cAAA,eAA0E;IAA5BD,EAAA,CAAAE,UAAA,sBAAA8B,wDAAA;MAAAhC,EAAA,CAAAI,aAAA,CAAA6B,GAAA;MAAA,MAAA3B,MAAA,GAAAN,EAAA,CAAAO,aAAA;MAAA,OAAAP,EAAA,CAAAQ,WAAA,CAAYF,MAAA,CAAA4B,YAAA,EAAc;IAAA,EAAC;IAEjElC,EADJ,CAAAC,cAAA,cAAyB,gBACK;IAAAD,EAAA,CAAAU,MAAA,2CAAqB;IAAAV,EAAA,CAAAW,YAAA,EAAQ;IACvDX,EAAA,CAAAC,cAAA,YAA0B;IAAAD,EAAA,CAAAU,MAAA,GAAyD;IAAAV,EAAA,CAAAW,YAAA,EAAI;IACvFX,EAAA,CAAAC,cAAA,gBAaE;IATMD,EAAA,CAAAY,gBAAA,2BAAAuB,8DAAArB,MAAA;MAAAd,EAAA,CAAAI,aAAA,CAAA6B,GAAA;MAAA,MAAA3B,MAAA,GAAAN,EAAA,CAAAO,aAAA;MAAAP,EAAA,CAAAe,kBAAA,CAAAT,MAAA,CAAA8B,YAAA,EAAAtB,MAAA,MAAAR,MAAA,CAAA8B,YAAA,GAAAtB,MAAA;MAAA,OAAAd,EAAA,CAAAQ,WAAA,CAAAM,MAAA;IAAA,EAA0B;IAI1Bd,EAAA,CAAAE,UAAA,2BAAAiC,8DAAA;MAAAnC,EAAA,CAAAI,aAAA,CAAA6B,GAAA;MAAA,MAAA3B,MAAA,GAAAN,EAAA,CAAAO,aAAA;MAAA,OAAAP,EAAA,CAAAQ,WAAA,CAAiBF,MAAA,CAAA+B,eAAA,EAAiB;IAAA,EAAC;IAM/CrC,EAdI,CAAAW,YAAA,EAaE,EACA;IAGFX,EADJ,CAAAC,cAAA,gBAAoB,gBACsE;IAA/DD,EAAA,CAAAY,gBAAA,2BAAA0B,8DAAAxB,MAAA;MAAAd,EAAA,CAAAI,aAAA,CAAA6B,GAAA;MAAA,MAAA3B,MAAA,GAAAN,EAAA,CAAAO,aAAA;MAAAP,EAAA,CAAAe,kBAAA,CAAAT,MAAA,CAAAiC,eAAA,EAAAzB,MAAA,MAAAR,MAAA,CAAAiC,eAAA,GAAAzB,MAAA;MAAA,OAAAd,EAAA,CAAAQ,WAAA,CAAAM,MAAA;IAAA,EAA6B;IAApDd,EAAA,CAAAW,YAAA,EAAsF;IACtFX,EAAA,CAAAU,MAAA,8BACJ;IAAAV,EAAA,CAAAW,YAAA,EAAQ;IAERX,EAAA,CAAAC,cAAA,kBAA2G;IACvGD,EAAA,CAAAU,MAAA,gBACJ;IAAAV,EAAA,CAAAW,YAAA,EAAS;IAETX,EAAA,CAAAC,cAAA,kBAAiE;IAAtBD,EAAA,CAAAE,UAAA,mBAAAsC,wDAAA;MAAAxC,EAAA,CAAAI,aAAA,CAAA6B,GAAA;MAAA,MAAA3B,MAAA,GAAAN,EAAA,CAAAO,aAAA;MAAA,OAAAP,EAAA,CAAAQ,WAAA,CAASF,MAAA,CAAAmC,SAAA,EAAW;IAAA,EAAC;IAE5DzC,EADA,CAAA0C,UAAA,KAAAC,sCAAA,mBAAgC,KAAAC,sCAAA,mBACE;IAE1C5C,EADI,CAAAW,YAAA,EAAS,EACN;;;;IA9B2BX,EAAA,CAAAmB,SAAA,GAAyD;IAAzDnB,EAAA,CAAA6B,kBAAA,6BAAAvB,MAAA,CAAAuC,QAAA,6BAAyD;IAK3E7C,EAAA,CAAAmB,SAAA,EAA0B;IAA1BnB,EAAA,CAAAoB,gBAAA,YAAAd,MAAA,CAAA8B,YAAA,CAA0B;IAaXpC,EAAA,CAAAmB,SAAA,GAA6B;IAA7BnB,EAAA,CAAAoB,gBAAA,YAAAd,MAAA,CAAAiC,eAAA,CAA6B;IAIxBvC,EAAA,CAAAmB,SAAA,GAA4D;IAA5DnB,EAAA,CAAAqB,UAAA,aAAAf,MAAA,CAAAwC,kBAAA,IAAAxC,MAAA,CAAA8B,YAAA,CAAAb,MAAA,OAA4D;IAKjFvB,EAAA,CAAAmB,SAAA,GAAuB;IAAvBnB,EAAA,CAAAqB,UAAA,SAAAf,MAAA,CAAAyB,aAAA,KAAuB;IACvB/B,EAAA,CAAAmB,SAAA,EAAyB;IAAzBnB,EAAA,CAAAqB,UAAA,SAAAf,MAAA,CAAAyB,aAAA,OAAyB;;;;;;IAOhC/B,EAFR,CAAAC,cAAA,cAA2C,cACZ,eACE;IAAAD,EAAA,CAAAU,MAAA,mBAAE;IAAAV,EAAA,CAAAW,YAAA,EAAO;IAE9BX,EADJ,CAAAC,cAAA,UAAK,SACG;IAAAD,EAAA,CAAAU,MAAA,2BAAoB;IAAAV,EAAA,CAAAW,YAAA,EAAK;IAC7BX,EAAA,CAAAC,cAAA,QAAG;IAAAD,EAAA,CAAAU,MAAA,6CAAsC;IAEjDV,EAFiD,CAAAW,YAAA,EAAI,EAC3C,EACJ;IACNX,EAAA,CAAAC,cAAA,iBAAoD;IAAtBD,EAAA,CAAAE,UAAA,mBAAA6C,sDAAA;MAAA/C,EAAA,CAAAI,aAAA,CAAA4C,GAAA;MAAA,MAAA1C,MAAA,GAAAN,EAAA,CAAAO,aAAA;MAAA,OAAAP,EAAA,CAAAQ,WAAA,CAASF,MAAA,CAAAmC,SAAA,EAAW;IAAA,EAAC;IAACzC,EAAA,CAAAU,MAAA,wBAAgB;IACxEV,EADwE,CAAAW,YAAA,EAAS,EAC3E;;;ADvFlB,OAAM,MAAOsC,cAAc;EAcvBC,YACYC,GAAiB,EACjBC,MAAc,EACdC,IAAiB;IAFjB,KAAAF,GAAG,GAAHA,GAAG;IACH,KAAAC,MAAM,GAANA,MAAM;IACN,KAAAC,IAAI,GAAJA,IAAI;IAhBhB,KAAAC,eAAe,GAAGC,QAAQ,CAACC,eAAe,CAACC,YAAY,CAAC,YAAY,CAAC,KAAK,MAAM;IAChF,KAAAlB,eAAe,GAAG,KAAK;IACvB,KAAAZ,QAAQ,GAAG,EAAE;IACb,KAAAX,KAAK,GAAG,EAAE;IACV,KAAAoB,YAAY,GAAG,EAAE;IACjB,KAAAd,YAAY,GAAG,KAAK;IACpB,KAAAwB,kBAAkB,GAAG,KAAK;IAC1B,KAAAY,SAAS,GAAG,KAAK;IACjB,KAAAb,QAAQ,GAAG,IAAI;IACf,KAAAd,aAAa,GAAG,CAAC;EAQd;EAEH4B,WAAWA,CAAA;IACP,IAAI,IAAI,CAACC,KAAK,EAAEC,aAAa,CAAC,IAAI,CAACD,KAAK,CAAC;EAC7C;EAEAE,YAAYA,CAAA;IACR,IAAI,CAACR,eAAe,GAAG,CAAC,IAAI,CAACA,eAAe;IAC5C,MAAMS,CAAC,GAAG,IAAI,CAACT,eAAe,GAAG,MAAM,GAAG,OAAO;IACjDC,QAAQ,CAACC,eAAe,CAACQ,YAAY,CAAC,YAAY,EAAED,CAAC,CAAC;IACtDE,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,CAAC,CAAC;EACpC;EAEA7C,YAAYA,CAAA;IAAW,IAAI,CAAC2B,QAAQ,GAAG,CAAC,IAAI,CAACA,QAAQ;EAAE;EAEvDpC,WAAWA,CAAA;IACP,MAAM0D,IAAI,GAAoB;MAAEnD,KAAK,EAAE,IAAI,CAAC6B,QAAQ,GAAG,IAAI,CAAC7B,KAAK,GAAGoD,SAAS;MAAEzC,QAAQ,EAAE,IAAI,CAACkB,QAAQ,GAAGuB,SAAS,GAAG,IAAI,CAACzC;IAAQ,CAAE;IAEpI,IAAI,CAAC,IAAI,CAACmB,kBAAkB,IAAI,CAAC,IAAI,CAACxB,YAAY,EAAE;MAChD,IAAI,CAACwB,kBAAkB,GAAG,IAAI;MAC9B,IAAI,CAACK,GAAG,CAACkB,QAAQ,CAACF,IAAI,CAAC,CAACG,SAAS,CAAC;QAC9BC,IAAI,EAAGC,IAAsC,IAAI;UAC7C,IAAI,CAAClD,YAAY,GAAG,IAAI;UACxB,IAAI,CAACoC,SAAS,GAAG,KAAK;UACtB,IAAI,CAACe,YAAY,GAAGD,IAAI,CAACC,YAAY;UAErC,MAAMC,QAAQ,GAAG,IAAIC,IAAI,CAACH,IAAI,CAACE,QAAQ,CAAC,CAACE,OAAO,EAAE;UAClD,MAAMC,GAAG,GAAGF,IAAI,CAACE,GAAG,EAAE;UACtB,IAAI,CAAC9C,aAAa,GAAG+C,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,KAAK,CAAC,CAACN,QAAQ,GAAGG,GAAG,IAAI,IAAI,CAAC,CAAC;UACrE,IAAI,CAACI,UAAU,EAAE;QACrB,CAAC;QACDC,KAAK,EAAEA,CAAA,KAAK;UACR,IAAI,CAACxB,SAAS,GAAG,IAAI;UACrB,IAAI,CAACpC,YAAY,GAAG,KAAK;UACzB,IAAI,CAACwB,kBAAkB,GAAG,KAAK;UAC/B,IAAI,IAAI,CAACc,KAAK,EAAEC,aAAa,CAAC,IAAI,CAACD,KAAK,CAAC;QAC7C;OACH,CAAC;IACN;EACJ;EAEQqB,UAAUA,CAAA;IACd,IAAI,IAAI,CAACrB,KAAK,EAAEC,aAAa,CAAC,IAAI,CAACD,KAAK,CAAC;IACzC,IAAI,CAACA,KAAK,GAAGuB,WAAW,CAAC,MAAK;MAC1B,IAAI,IAAI,CAACpD,aAAa,GAAG,CAAC,EAAE;QACxB,IAAI,CAACA,aAAa,EAAE;MACxB,CAAC,MAAM;QACH,IAAI,CAACU,SAAS,EAAE;MACpB;IACJ,CAAC,EAAE,IAAI,CAAC;EACZ;EAEAJ,eAAeA,CAAA;IACX,IAAI,CAACS,kBAAkB,GAAG,EAAE,IAAI,CAACV,YAAY,EAAEgD,QAAQ,EAAE,CAAC7D,MAAM,KAAK,CAAC,CAAC;EAC3E;EAEAW,YAAYA,CAAA;IACR,IAAI,CAAC,IAAI,CAACY,kBAAkB,IAAI,IAAI,CAACxB,YAAY,IAAI,IAAI,CAACmD,YAAY,EAAE;MACpE,IAAI,IAAI,CAACA,YAAY,CAACY,YAAY,KAAK,IAAI,EAAE,IAAI,CAACZ,YAAY,CAACY,YAAY,GAAG,EAAE;MAChF,IAAI,CAAClC,GAAG,CAACmC,KAAK,CAAC,IAAI,CAACb,YAAY,EAAE,IAAI,CAACrC,YAAY,EAAE,IAAI,CAACG,eAAe,CAAC,CAAC+B,SAAS,CAAC;QACjFC,IAAI,EAAGgB,EAAE,IAAI;UACT,IAAIA,EAAE,EAAE;YACJ,IAAI,IAAI,CAAC3B,KAAK,EAAEC,aAAa,CAAC,IAAI,CAACD,KAAK,CAAC;YACzC,IAAI,CAACF,SAAS,GAAG,KAAK;YACtB;YACA,IAAI,CAACL,IAAI,CAACmC,KAAK,CAAC,IAAI,CAACf,YAAY,CAACY,YAAY,IAAI,OAAO,IAAI,CAACZ,YAAY,CAACgB,eAAe,IAAI,EAAE,EAAE,EAAE,KAAK,CAAC;YAC1G,IAAI,CAACrC,MAAM,CAACsC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;UACnC,CAAC,MAAM;YACH,IAAI,CAAChC,SAAS,GAAG,IAAI;UACzB;QACJ,CAAC;QACDwB,KAAK,EAAEA,CAAA,KAAK;UACR,IAAI,CAACxB,SAAS,GAAG,IAAI;QACzB;OACH,CAAC;IACN;EACJ;EAEAjB,SAASA,CAAA;IACL,IAAI,CAACiB,SAAS,GAAG,KAAK;IACtB,IAAI,CAACpC,YAAY,GAAG,KAAK;IACzB,IAAI,CAACwB,kBAAkB,GAAG,KAAK;IAC/B,IAAI,CAACnB,QAAQ,GAAG,EAAE;IAClB,IAAI,CAACS,YAAY,GAAG,EAAE;IACtB,IAAI,CAACL,aAAa,GAAG,CAAC;IACtB,IAAI,IAAI,CAAC6B,KAAK,EAAEC,aAAa,CAAC,IAAI,CAACD,KAAK,CAAC;EAC7C;EAEA9B,UAAUA,CAAC6D,CAAS;IAChB,MAAMC,CAAC,GAAGd,IAAI,CAACE,KAAK,CAACW,CAAC,GAAG,EAAE,CAAC;IAC5B,MAAME,CAAC,GAAGF,CAAC,GAAG,EAAE;IAChB,OAAO,GAAGC,CAAC,CAACR,QAAQ,EAAE,CAACU,QAAQ,CAAC,CAAC,EAAC,GAAG,CAAC,IAAID,CAAC,CAACT,QAAQ,EAAE,CAACU,QAAQ,CAAC,CAAC,EAAC,GAAG,CAAC,EAAE;EAC5E;;;uBA9GS7C,cAAc,EAAAjD,EAAA,CAAA+F,iBAAA,CAAAC,EAAA,CAAAC,YAAA,GAAAjG,EAAA,CAAA+F,iBAAA,CAAAG,EAAA,CAAAC,MAAA,GAAAnG,EAAA,CAAA+F,iBAAA,CAAAK,EAAA,CAAAC,WAAA;IAAA;EAAA;;;YAAdpD,cAAc;MAAAqD,SAAA;MAAAC,UAAA;MAAAC,QAAA,GAAAxG,EAAA,CAAAyG,mBAAA;MAAAC,KAAA;MAAAC,IAAA;MAAAC,MAAA;MAAAC,QAAA,WAAAC,wBAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;UCfX/G,EALhB,CAAAC,cAAA,aAA6E,aACxC,aACC,aAEA,cACI;UAAAD,EAAA,CAAAU,MAAA,yBAAG;UACjCV,EADiC,CAAAW,YAAA,EAAO,EAClC;UA4FNX,EAzFA,CAAA0C,UAAA,IAAAuE,8BAAA,kBAAsF,IAAAC,8BAAA,mBA0BC,IAAAC,8BAAA,mBA2Bb,IAAAC,6BAAA,kBAoC/B;UAYvCpH,EADJ,CAAAC,cAAA,cAAgC,YACgB;UAAAD,EAAA,CAAAU,MAAA,cAAM;UAAAV,EAAA,CAAAW,YAAA,EAAI;UACtDX,EAAA,CAAAC,cAAA,iBAAqE;UAAzBD,EAAA,CAAAE,UAAA,mBAAAmH,iDAAA;YAAA,OAASL,GAAA,CAAAlD,YAAA,EAAc;UAAA,EAAC;UAChE9D,EAAA,CAAAU,MAAA,IACJ;UAIhBV,EAJgB,CAAAW,YAAA,EAAS,EACP,EACJ,EACJ,EACJ;;;UArHkCX,EAAA,CAAAsH,WAAA,eAAAN,GAAA,CAAA1D,eAAA,CAAoC;UASXtD,EAAA,CAAAmB,SAAA,GAA+B;UAA/BnB,EAAA,CAAAqB,UAAA,SAAA2F,GAAA,CAAAnE,QAAA,KAAAmE,GAAA,CAAA1F,YAAA,CAA+B;UA0B/BtB,EAAA,CAAAmB,SAAA,EAAgC;UAAhCnB,EAAA,CAAAqB,UAAA,UAAA2F,GAAA,CAAAnE,QAAA,KAAAmE,GAAA,CAAA1F,YAAA,CAAgC;UA2B9EtB,EAAA,CAAAmB,SAAA,EAAkB;UAAlBnB,EAAA,CAAAqB,UAAA,SAAA2F,GAAA,CAAA1F,YAAA,CAAkB;UAoCnBtB,EAAA,CAAAmB,SAAA,EAAe;UAAfnB,EAAA,CAAAqB,UAAA,SAAA2F,GAAA,CAAAtD,SAAA,CAAe;UAcb1D,EAAA,CAAAmB,SAAA,GACJ;UADInB,EAAA,CAAA6B,kBAAA,MAAAmF,GAAA,CAAA1D,eAAA,qCACJ;;;qBDlGFzD,YAAY,EAAA0H,EAAA,CAAAC,IAAA,EAAE1H,WAAW,EAAA2H,EAAA,CAAAC,aAAA,EAAAD,EAAA,CAAAE,oBAAA,EAAAF,EAAA,CAAAG,4BAAA,EAAAH,EAAA,CAAAI,eAAA,EAAAJ,EAAA,CAAAK,oBAAA,EAAAL,EAAA,CAAAM,iBAAA,EAAAN,EAAA,CAAAO,kBAAA,EAAAP,EAAA,CAAAQ,gBAAA,EAAAR,EAAA,CAAAS,OAAA,EAAAT,EAAA,CAAAU,MAAA,EAAEpI,UAAU;MAAAqI,MAAA;MAAAC,eAAA;IAAA;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}